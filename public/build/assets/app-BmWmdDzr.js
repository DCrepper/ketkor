var Hi=Object.defineProperty;var ji=(n,t,e)=>t in n?Hi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ye=(n,t,e)=>ji(n,typeof t!="symbol"?t+"":t,e);/* empty css            */var Ri=Object.defineProperty,Vi=(n,t,e)=>t in n?Ri(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ie=(n,t,e)=>Vi(n,typeof t!="symbol"?t+"":t,e);document.addEventListener("alpine:init",()=>{window.Alpine.store("editOnClickValidation",{pending:[],set(n,t){this.pending=this.pending.filter(e=>e.value!==n),this.pending.push({value:n,textContent:t})},has(n){return this.pending.some(t=>t.value===n)},get(n){return this.pending.find(t=>t.value===n)},notContains(n){return this.pending.length>0&&!this.has(n)},clear(){this.pending=[]},getTextContent(n){const t=this.pending.find(e=>e.value===n);return t?t.textContent:null}}),window.editOnClickValidation=window.Alpine.store("editOnClickValidation")});document.addEventListener("alpine:init",()=>{window.Alpine.store("pgBulkActions",{selected:[],init(){window.addEventListener("pgBulkActions::addMore",n=>{const t=n.__livewire.params[0];typeof this.selected[t.tableName]>"u"&&(this.selected[t.tableName]=[]),this.selected[t.tableName].push(t.value)}),window.addEventListener("pgBulkActions::clear",n=>{this.clear(n.detail)}),window.addEventListener("pgBulkActions::clearAll",()=>{this.clearAll()})},add(n,t){if(typeof this.selected[t]>"u"&&(this.selected[t]=[]),!this.selected[t].includes(n)){this.selected[t].push(n);return}this.remove(n,t)},remove(n,t){const e=this.selected[t].indexOf(n);e>-1&&this.selected[t].splice(e,1)},get(n){return this.selected[n]??""},count(n){return typeof this.selected[n]>"u"?0:this.selected[n].length},clear(n){this.selected[n]=[]},clearAll(){this.selected=[]}}),window.pgBulkActions=window.Alpine.store("pgBulkActions")});const Yi=n=>({field:n.field??null,tableName:n.tableName??null,enabled:n.enabled??!1,id:n.id,trueValue:n.trueValue,falseValue:n.falseValue,toggle:n.toggle,save(){this.toggle=this.toggle===0?1:0,this.$wire.dispatch("pg:toggleable-"+this.tableName,{id:this.id,field:this.field,value:this.toggle})}}),Bi=(n,t,e)=>{const i=n[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},qi=n=>({dataField:n.dataField,tableName:n.tableName,label:n.label??null,locale:n.locale??{locale:"default",dateFormat:"Y-m-d H:i",time_24hr:!1,enableTime:!0},onlyFuture:n.onlyFuture??!1,noWeekEnds:n.noWeekEnds??!1,customConfig:n.customConfig??null,type:n.type,element:null,selectedDates:null,async init(){typeof flatpickr>"u"&&(console.log("%c%s","color: #f59e0c; font-size: 1.2em; font-weight: bold; line-height: 1.5"," PowerGrid"),console.error("%c%s","font-size: 1em; line-height: 1.5",`
Failed to mount filter: Filter::datetime('${this.dataField}') on table ['${this.tableName}']

• Install flatpickr: npm install flatpickr

• Add 'import flatpickr from "flatpickr"' in resources/js/app.js file
  `)),window.addEventListener(`pg:clear_flatpickr::${this.tableName}:${this.dataField}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()}),window.addEventListener(`pg:clear_all_flatpickr::${this.tableName}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()});try{const e=await Bi(Object.assign({}),`./flatpickr/dist/l10n/${this.locale.locale}.js`,5);flatpickr.localize(e.default||e)}catch{}const t=this.getOptions();this.$refs.rangeInput&&typeof flatpickr<"u"&&(this.element=flatpickr(this.$refs.rangeInput,t),this.selectedDates=this.$wire.get(`filters.${this.type}.${this.dataField}.formatted`),this.element.setDate(this.selectedDates))},getOptions(){const t={mode:"range",defaultHour:0,...this.locale,...this.customConfig};return this.onlyFuture&&(t.minDate="today"),this.noWeekEnds&&(t.disable=[function(e){return e.getDay()===0||e.getDay()===6}]),t.onClose=(e,i,r)=>{e=e.map(o=>this.element.formatDate(o,"Y-m-d")),e.length>0&&this.selectedDates!==i&&Livewire.dispatch("pg:datePicker-"+this.tableName,{selectedDates:e,dateStr:i,timezone:this.customConfig.timezone??new Date().toString().match(/([-\+][0-9]+)\s/)[1],type:this.type,field:this.dataField,label:this.label})},t}}),zi=n=>({theme:n.theme,id:n.id??null,dataField:n.dataField??null,content:n.content,fallback:n.fallback,inputClass:n.inputClass,saveOnMouseOut:n.saveOnMouseOut,oldContent:null,editable:!1,hash:null,hashError:!0,showEditable:!1,editableInput:"",init(){this.content.length===0&&this.fallback&&(this.content=this.htmlSpecialChars(this.fallback)),this.hash=this.dataField+"-"+this.id,window.addEventListener("toggle-"+this.hash,()=>{this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.click(),this.observe(()=>document.getElementById("editable-"+this.hash),e=>{setTimeout(()=>this.setFocusToEnd(e),100)})})}),this.$watch("editable",t=>{if(t){let e=!1;if(this.showEditable=!1,this.content=this.htmlSpecialChars(this.content),this.oldContent=this.content,this.hashError=this.store().notContains(this.hash),this.observe(()=>document.getElementById("editable-"+this.hash),i=>{setTimeout(()=>{this.setFocusToEnd(i),this.store().getTextContent(this.hash)&&(i.textContent=this.store().getTextContent(this.hash))},30)}),this.hashError){const i=this.store().get(this.hash),r=document.getElementById("clickable-"+i);r&&r.click()}e=!0,this.editableInput=`
                <div
                    x-ref="editable"
                    x-text="content"
                    value="${this.content}"
                    placeholder="${this.content}"
                    contenteditable
                    class="pg-single-line ${this.inputClass}"
                    ${this.saveOnMouseOut?'x-on:mousedown.outside="save()"':""}
                    x-on:keydown.enter="save()"
                    id="${"editable-"+this.dataField+"-"+this.id}"
                    x-on:keydown.esc="cancel"
                >
                </div>`,this.$nextTick(()=>setTimeout(()=>{this.showEditable=e,this.focus()},150))}}),this.content=this.htmlSpecialChars(this.content)},store(){return window.editOnClickValidation},save(){this.store().clear(),this.store().set(this.hash,this.$el.textContent),this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.textContent=this.$el.textContent}),window.addEventListener("pg:editable-close-"+this.id,()=>{this.store().clear(),this.editable=!1,this.showEditable=!1}),this.store().has(this.hash)||this.store().set(this.hash,this.$el.textContent),this.$wire.dispatch("pg:editable-"+this.$wire.tableName,{id:this.id,value:this.$el.textContent,field:this.dataField}),this.oldContent=this.store().getTextContent(this.hash),this.$nextTick(()=>{this.focus(),this.$el.setAttribute("value","")}),this.content=this.htmlSpecialChars(this.$el.textContent)},focus(){this.setFocusToEnd(this.$el)},cancel(){this.store().clear(),this.$refs.editable.textContent=this.oldContent,this.content=this.oldContent,this.editable=!1,this.showEditable=!1,this.$refs.error&&(this.$refs.error.innerHTML="")},htmlSpecialChars(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent},observe(t,e){new MutationObserver((i,r)=>{for(let o of i)if(o.type==="childList"){const s=t();if(s){e(s),r.disconnect();break}}}).observe(document.body,{childList:!0,subtree:!0})},setFocusToEnd(t){if(!t)return;const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),i.collapse(!1),e.removeAllRanges(),e.addRange(i),t.focus()}});function Ki(n){n.querySelectorAll("tbody tr td").forEach(t=>{t.classList.remove("hidden")}),n.querySelectorAll("thead tr th").forEach(t=>{t.classList.remove("hidden")})}function Wi(n){let t=0;const e=n.querySelectorAll("table thead tr:nth-child(1) th[fixed]"),i=jt(n);return e.forEach(r=>{t+=jt(r)}),i-t}function Ui(n,t){const e=[].slice.call(n.querySelectorAll("table thead tr:nth-child(1) th")),i=[].slice.call(e).sort(function(l,d){const u=l.getAttribute("sort_order")??999,p=d.getAttribute("sort_order")??999;return u-p});let r=0,o=!0;const s=[];return i.forEach(l=>{const d=jt(l);l.getAttribute("fixed")===null&&(o&&r<=t&&r+d<=t?r+=d:(s.push(e.indexOf(l)+1),o=!1))}),s}function Qi(n,t){for(const e of t)n.querySelectorAll(`tbody:not(tbody[expand]) tr td:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")}),n.querySelectorAll(`thead tr th:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")})}function Gi(n,t){var e,i;if(n.querySelectorAll("table tbody[expand] tr td div").length){for(const r of n.querySelectorAll("table tbody[expand] tr td div"))r.innerHTML="";if(t.length)for(const r of t){const o=n.querySelectorAll("table tbody:not(tbody[expand])");for(const s of o){const l=(e=s.nextElementSibling)==null?void 0:e.querySelector("tr td div");if(!l)continue;let d=n.querySelector(`table thead tr th:nth-child(${r}) span[data-value]`).textContent;const u=(i=s.querySelector(`tr:last-child td:nth-child(${r})`))==null?void 0:i.innerHTML;d.length&&(d+=":"),l.querySelector(`div[data-expand-item-${r}]`)||(l.innerHTML+=`<div class="responsive-row-expand-item-container" data-expand-item-${r}>
                    <span class="font-bold responsive-row-expand-item-name">${d}</span>
                    <span class="responsive-row-expand-item-value">${u}</span>
                </div>`)}}}}function jt(n){return parseFloat(n.getBoundingClientRect().width.toFixed(2))}function Ji(n){Ki(n);const t=Wi(n),e=Ui(n,t);Gi(n,e),Qi(n,e)}const Xi=()=>({running:!1,expanded:null,element:null,hasHiddenElements:!1,size:0,toggleExpanded(n){this.expanded=this.expanded==n?null:n},init(){this.$nextTick(()=>{this.handleResize(),this.observeElement(),window.addEventListener("pg-livewire-request-finished",()=>{setTimeout(()=>this.handleResize(),5)})})},handleResize(){var n;const t=this.$el;Ji(t),this.hasHiddenElements=(n=t.querySelector("table tbody[expand] tr td div"))==null?void 0:n.innerHTML,this.hasHiddenElements||(this.expanded=null)},observeElement(){new ResizeObserver(n=>{n.forEach(t=>{if(t.contentRect.width>0){if(this.size===this.$el.getBoundingClientRect().width)return;this.size=this.$el.getBoundingClientRect().width,this.handleResize()}})}).observe(this.$el)}}),Zi=(n,t,e)=>{Livewire.dispatch(`${n}-${t.tableName}`,{label:t.label,field:t.dataField,values:e})},Bn=(n,t)=>{Zi("pg:multiSelect",n,t)};function wt(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class er{constructor(){this._events={}}on(t,e){wt(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}wt(t,r=>{if(i===1){delete this._events[r];return}const o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;wt(t,r=>{const o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}}function tr(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const ut=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":ir(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),qn=n=>{if(!nr(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},zn=n=>{let t=Array.from(n);return ut(t)},nr=n=>new Set(n).size!==n.length,$e=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),ir=n=>n.reduce((t,e)=>Math.max(t,rr(e)),0),rr=n=>Array.from(n).length,Kn=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return Kn(e).forEach(function(i){let r=i.slice(0);r[0]=n.charAt(0)+r[0],t.push(r),r=i.slice(0),r.unshift(n.charAt(0)),t.push(r)}),t},sr=[[0,65535]],or="[̀-ͯ·ʾʼ]";let it,Wn;const ar=3,zt={},sn={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in sn){let t=sn[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);zt[i]=n}}const lr=new RegExp(Object.keys(zt).join("|")+"|"+or,"gu"),cr=n=>{it===void 0&&(it=pr(sr))},on=(n,t="NFKD")=>n.normalize(t),rt=n=>Array.from(n).reduce((t,e)=>t+dr(e),""),dr=n=>(n=on(n).toLowerCase().replace(lr,t=>zt[t]||""),on(n,"NFC"));function*ur(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=rt(r);o!=r.toLowerCase()&&(o.length>ar||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}const fr=n=>{const t={},e=(i,r)=>{const o=t[i]||new Set,s=new RegExp("^"+zn(o)+"$","iu");r.match(s)||(o.add($e(r)),t[i]=o)};for(let i of ur(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},pr=n=>{const t=fr(n),e={};let i=[];for(let o in t){let s=t[o];s&&(e[o]=zn(s)),o.length>1&&i.push($e(o))}i.sort((o,s)=>s.length-o.length);const r=ut(i);return Wn=new RegExp("^"+r,"u"),e},hr=(n,t=1)=>{let e=0;return n=n.map(i=>(it[i]&&(e+=i.length),it[i]||i)),e>=t?qn(n):""},gr=(n,t=1)=>(t=Math.max(t,n.length-1),ut(Kn(n).map(e=>hr(e,t)))),an=(n,t=!0)=>{let e=n.length>1?1:0;return ut(n.map(i=>{let r=[];const o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(gr(i.substrs[s]||"",e));return qn(r)}))},mr=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=o=>{for(const s of i){if(s.start===o.start&&s.substr===o.substr)return!1;if(!(o.length==1||s.length==1)&&(o.start<s.start&&o.end>s.start||s.start<o.start&&s.end>o.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class st{constructor(){Ie(this,"parts"),Ie(this,"substrs"),Ie(this,"start"),Ie(this,"end"),this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new st,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(const d of r)i.add(d);let s=e.substr.substring(0,t-o.start),l=s.length;return i.add({start:o.start,end:o.start+l,length:l,substr:s}),i}}const vr=n=>{cr(),n=rt(n);let t="",e=[new st];for(let i=0;i<n.length;i++){let r=n.substring(i).match(Wn);const o=n.substring(i,i+1),s=r?r[0]:null;let l=[],d=new Set;for(const u of e){const p=u.last();if(!p||p.length==1||p.end<=i)if(s){const h=s.length;u.add({start:i,end:i+h,length:h,substr:s}),d.add("1")}else u.add({start:i,end:i+1,length:1,substr:o}),d.add("2");else if(s){let h=u.clone(i,p);const m=s.length;h.add({start:i,end:i+m,length:m,substr:s}),l.push(h)}else d.add("3")}if(l.length>0){l=l.sort((u,p)=>u.length()-p.length());for(let u of l)mr(u,e)||e.push(u);continue}if(i>0&&d.size==1&&!d.has("3")){t+=an(e,!1);let u=new st;const p=e[0];p&&u.add(p.last()),e=[u]}}return t+=an(e,!0),t},br=(n,t)=>{if(n)return n[t]},yr=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},Ct=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},Ot=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},ze=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},wr=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=rt(n+"").toLowerCase(),t=rt(t+"").toLowerCase(),n>t?1:t>n?-1:0);class Cr{constructor(t,e){Ie(this,"items"),Ie(this,"settings"),this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map($e).join("|")+"):(.*)$")),o.forEach(l=>{let d,u=null,p=null;s&&(d=l.match(s))&&(u=d[1],l=d[2]),l.length>0&&(this.settings.diacritics?p=vr(l)||null:p=$e(l),p&&e&&(p="\\b"+p)),r.push({string:l,regex:p?new RegExp(p,"iu"):null,field:u})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,o=t.weights,s=r.length,l=t.getAttrFn;if(!s)return function(){return 1};const d=function(){return s===1?function(u,p){const h=r[0].field;return Ct(l(p,h),u,o[h]||1)}:function(u,p){var h=0;if(u.field){const m=l(p,u.field);!u.regex&&m?h+=1/s:h+=Ct(m,u,1)}else ze(o,(m,A)=>{h+=Ct(l(p,A),u,m)});return h/s}}();return i===1?function(u){return d(e[0],u)}:t.options.conjunction==="and"?function(u){var p,h=0;for(let m of e){if(p=d(m,u),p<=0)return 0;h+=p}return h/i}:function(u){var p=0;return ze(e,h=>{p+=d(h,u)}),p/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);const l=function(d,u){return d==="$score"?u.score:t.getAttrFn(r.items[u.id],d)};if(s)for(let d of s)(t.query||d.field!=="$score")&&i.push(d);if(t.query){e=!0;for(let d of i)if(d.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(d=>d.field!=="$score");return i.length?function(d,u){var p,h;for(let m of i)if(h=m.field,p=(m.direction==="desc"?-1:1)*wr(l(h,d),l(h,u)),p)return p;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(Ot(r,"sort"),Ot(r,"sort_empty"),r.fields){Ot(r,"fields");const o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?yr:br}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;const s=e.score||i._getScoreFunction(o);t.length?ze(i.items,(d,u)=>{r=s(d),(e.filter===!1||r>0)&&o.items.push({score:r,id:u})}):ze(i.items,(d,u)=>{o.items.push({score:1,id:u})});const l=i._getSortFunction(o);return l&&o.items.sort(l),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}}const de=n=>typeof n>"u"||n===null?null:tt(n),tt=n=>typeof n=="boolean"?n?"1":"0":n+"",_t=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Or=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),_r=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},ln=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},Dr=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),q=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},G=(n,t,e,i)=>{n.addEventListener(t,e,i)},we=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},Dt=(n,t)=>n.getAttribute("id")||(n.setAttribute("id",t),t),cn=n=>n.replace(/[\\"']/g,"\\$&"),Ce=(n,t)=>{t&&n.append(t)},K=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},pe=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Un(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Un=n=>typeof n=="string"&&n.indexOf("<")>-1,Ar=n=>n.replace(/['"\\]/g,"\\$&"),At=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Ke=(n,t)=>{Object.assign(n.style,t)},se=(n,...t)=>{var e=Qn(t);n=Gn(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},me=(n,...t)=>{var e=Qn(t);n=Gn(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Qn=n=>{var t=[];return K(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Gn=n=>(Array.isArray(n)||(n=[n]),n),St=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},dn=(n,t=0)=>t>0?n[n.length-1]:n[0],Sr=n=>Object.keys(n).length===0,un=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},j=(n,t)=>{K(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Rt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},xr=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var l=document.createElement("span");l.className="highlight";var d=o.splitText(s.index);d.splitText(s[0].length);var u=d.cloneNode(!0);return l.appendChild(u),Rt(d,l),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},Er=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},Ir=65,kr=13,Mr=27,Lr=37,Fr=38,Tr=39,Pr=40,fn=8,$r=46,pn=9,Nr=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),We=Nr?"metaKey":"ctrlKey",hn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function gn(n,t){var e=Object.assign({},hn,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,l=e.optgroupField,d=e.optgroupLabelField,u=e.optgroupValueField,p=n.tagName.toLowerCase(),h=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!h&&!e.allowEmptyOption){let y=n.querySelector('option[value=""]');y&&(h=y.textContent)}var m={placeholder:h,options:[],optgroups:[],items:[],maxItems:null},A=()=>{var y,k=m.options,S={},b=1;let M=0;var N=O=>{var D=Object.assign({},O.dataset),C=i&&D[i];return typeof C=="string"&&C.length&&(D=Object.assign(D,JSON.parse(C))),D},ie=(O,D)=>{var C=de(O.value);if(C!=null&&!(!C&&!e.allowEmptyOption)){if(S.hasOwnProperty(C)){if(D){var T=S[C][l];T?Array.isArray(T)?T.push(D):S[C][l]=[T,D]:S[C][l]=D}}else{var E=N(O);E[r]=E[r]||O.textContent,E[o]=E[o]||C,E[s]=E[s]||O.disabled,E[l]=E[l]||D,E.$option=O,E.$order=E.$order||++M,S[C]=E,k.push(E)}O.selected&&m.items.push(C)}},B=O=>{var D,C;C=N(O),C[d]=C[d]||O.getAttribute("label")||"",C[u]=C[u]||b++,C[s]=C[s]||O.disabled,C.$order=C.$order||++M,m.optgroups.push(C),D=C[u],K(O.children,T=>{ie(T,D)})};m.maxItems=n.hasAttribute("multiple")?null:1,K(n.children,O=>{y=O.tagName.toLowerCase(),y==="optgroup"?B(O):y==="option"&&ie(O)})},g=()=>{const y=n.getAttribute(i);if(y)m.options=JSON.parse(y),K(m.options,S=>{m.items.push(S[o])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const S=k.split(e.delimiter);K(S,b=>{const M={};M[r]=b,M[o]=b,m.options.push(M)}),m.items=S}};return p==="select"?A():g(),Object.assign({},hn,m,t)}var mn=0;class Z extends tr(er){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,mn++;var i,r=pe(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");const s=gn(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=Dt(r,"tomselect-"+mn),this.isRequired=r.required,this.sifter=new Cr(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var l=s.createFilter;typeof l!="function"&&(typeof l=="string"&&(l=new RegExp(l)),l instanceof RegExp?s.createFilter=k=>l.test(k):s.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();const d=pe("<div>"),u=pe("<div>"),p=this._render("dropdown"),h=pe('<div role="listbox" tabindex="-1">'),m=this.input.getAttribute("class")||"",A=s.mode;var g;if(se(d,s.wrapperClass,m,A),se(u,s.controlClass),Ce(d,u),se(p,s.dropdownClass,A),s.copyClassesToDropdown&&se(p,m),se(h,s.dropdownContentClass),Ce(p,h),pe(s.dropdownParent||d).appendChild(p),Un(s.controlInput)){g=pe(s.controlInput);var y=["autocorrect","autocapitalize","autocomplete","spellcheck"];K(y,k=>{r.getAttribute(k)&&j(g,{[k]:r.getAttribute(k)})}),g.tabIndex=-1,u.appendChild(g),this.focus_node=g}else s.controlInput?(g=pe(s.controlInput),this.focus_node=g):(g=pe("<input/>"),this.focus_node=u);this.wrapper=d,this.dropdown=p,this.dropdown_content=h,this.control=u,this.control_input=g,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,l=t.control,d=t.input,u=t.focus_node,p={passive:!0},h=t.inputId+"-ts-dropdown";j(o,{id:h}),j(u,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":h});const m=Dt(u,t.inputId+"-ts-control"),A="label[for='"+Ar(t.inputId)+"']",g=document.querySelector(A),y=t.focus.bind(t);if(g){G(g,"click",y),j(g,{for:m});const b=Dt(g,t.inputId+"-ts-label");j(u,{"aria-labelledby":b}),j(o,{"aria-labelledby":b})}if(s.style.width=d.style.width,t.plugins.names.length){const b="plugin-"+t.plugins.names.join(" plugin-");se([s,r],b)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&j(d,{multiple:"multiple"}),e.placeholder&&j(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+$e(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=_r(e.load,e.loadThrottle)),G(r,"mousemove",()=>{t.ignoreHover=!1}),G(r,"mouseenter",b=>{var M=St(b.target,"[data-selectable]",r);M&&t.onOptionHover(b,M)},{capture:!0}),G(r,"click",b=>{const M=St(b.target,"[data-selectable]");M&&(t.onOptionSelect(b,M),q(b,!0))}),G(l,"click",b=>{var M=St(b.target,"[data-ts-item]",l);if(M&&t.onItemSelect(b,M)){q(b,!0);return}i.value==""&&(t.onClick(),q(b,!0))}),G(u,"keydown",b=>t.onKeyDown(b)),G(i,"keypress",b=>t.onKeyPress(b)),G(i,"input",b=>t.onInput(b)),G(u,"blur",b=>t.onBlur(b)),G(u,"focus",b=>t.onFocus(b)),G(i,"paste",b=>t.onPaste(b));const k=b=>{const M=b.composedPath()[0];if(!s.contains(M)&&!r.contains(M)){t.isFocused&&t.blur(),t.inputState();return}M==i&&t.isOpen?b.stopPropagation():q(b,!0)},S=()=>{t.isOpen&&t.positionDropdown()};G(document,"mousedown",k),G(window,"scroll",S,p),G(window,"resize",S,p),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",S),window.removeEventListener("resize",S),g&&g.removeEventListener("click",y)},this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,d.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,G(d,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,d.disabled?t.disable():d.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),se(d,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),K(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?gn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){At(this.input,"input"),At(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){q(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);K(r,o=>{de(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){q(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),q(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==pn&&q(t);return}switch(t.keyCode){case Ir:if(we(We,t)&&e.control_input.value==""){q(t),e.selectAll();return}break;case Mr:e.isOpen&&(q(t,!0),e.close()),e.clearActiveItems();return;case Pr:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}q(t);return;case Fr:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}q(t);return;case kr:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),q(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&q(t);return;case Lr:e.advanceSelection(-1,t);return;case Tr:e.advanceSelection(1,t);return;case pn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),q(t)),e.settings.create&&e.createItem()&&q(t));return;case fn:case $r:e.deleteSelection(t);return}e.isInputHidden&&!we(We,t)&&q(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Or(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),q(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(q(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;se(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||me(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,At(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];ln(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,l,d,u;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&we("shiftKey",e)&&i.activeItems.length){for(u=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,u),l=Array.prototype.indexOf.call(i.control.children,t),s>l&&(d=s,s=l,l=d),o=s;o<=l;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);q(e)}else r==="click"&&we(We,e)||r==="keydown"&&we("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&me(i,"last-active"),se(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),me(t,"active")}clearActiveItems(){me(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,j(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),j(t,{"aria-selected":"true"}),se(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,l=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;l+s>r+o?this.scroll(l-r+s,e):l<o&&this.scroll(l,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(me(this.activeOption,"active"),j(this.activeOption,{"aria-selected":null})),this.activeOption=null,j(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,K(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(j(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&j(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let l=de(s.id);return!(l&&r.items.indexOf(l)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,l,d,u,p,h;const m={},A=[];var g=this,y=g.inputValue();const k=y===g.lastQuery||y==""&&g.lastQuery==null;var S=g.search(y),b=null,M=g.settings.shouldOpen||!1,N=g.dropdown_content;k&&(b=g.activeOption,b&&(p=b.closest("[data-group]"))),o=S.items.length,typeof g.settings.maxOptions=="number"&&(o=Math.min(o,g.settings.maxOptions)),o>0&&(M=!0);const ie=(O,D)=>{let C=m[O];if(C!==void 0){let E=A[C];if(E!==void 0)return[C,E.fragment]}let T=document.createDocumentFragment();return C=A.length,A.push({fragment:T,order:D,optgroup:O}),[C,T]};for(e=0;e<o;e++){let O=S.items[e];if(!O)continue;let D=O.id,C=g.options[D];if(C===void 0)continue;let T=tt(D),E=g.getOption(T,!0);for(g.settings.hideSelected||E.classList.toggle("selected",g.items.includes(T)),s=C[g.settings.optgroupField]||"",l=Array.isArray(s)?s:[s],i=0,r=l&&l.length;i<r;i++){s=l[i];let te=C.$order,U=g.optgroups[s];U===void 0?s="":te=U.$order;const[Le,Ae]=ie(s,te);i>0&&(E=E.cloneNode(!0),j(E,{id:C.$id+"-clone-"+i,"aria-selected":null}),E.classList.add("ts-cloned"),me(E,"active"),g.activeOption&&g.activeOption.dataset.value==D&&p&&p.dataset.group===s.toString()&&(b=E)),Ae.appendChild(E),s!=""&&(m[s]=Le)}}g.settings.lockOptgroupOrder&&A.sort((O,D)=>O.order-D.order),d=document.createDocumentFragment(),K(A,O=>{let D=O.fragment,C=O.optgroup;if(!D||!D.children.length)return;let T=g.optgroups[C];if(T!==void 0){let E=document.createDocumentFragment(),te=g.render("optgroup_header",T);Ce(E,te),Ce(E,D);let U=g.render("optgroup",{group:T,options:E});Ce(d,U)}else Ce(d,D)}),N.innerHTML="",Ce(N,d),g.settings.highlight&&(Er(N),S.query.length&&S.tokens.length&&K(S.tokens,O=>{xr(N,O.regex)}));var B=O=>{let D=g.render(O,{input:y});return D&&(M=!0,N.insertBefore(D,N.firstChild)),D};if(g.loading?B("loading"):g.settings.shouldLoad.call(g,y)?S.items.length===0&&B("no_results"):B("not_loading"),u=g.canCreate(y),u&&(h=B("option_create")),g.hasOptions=S.items.length>0||u,M){if(S.items.length>0){if(!b&&g.settings.mode==="single"&&g.items[0]!=null&&(b=g.getOption(g.items[0])),!N.contains(b)){let O=0;h&&!g.settings.addPrecedence&&(O=1),b=g.selectable()[O]}}else h&&(b=h);t&&!g.isOpen&&(g.open(),g.scrollToOption(b,"auto")),g.setActiveOption(b)}else g.clearActiveOption(),t&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=de(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){K(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=de(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,o;const s=de(t),l=de(e[i.settings.valueField]);if(s===null)return;const d=i.options[s];if(d==null)return;if(typeof l!="string")throw new Error("Value must be set in option data");const u=i.getOption(s),p=i.getItem(s);if(e.$order=e.$order||d.$order,delete i.options[s],i.uncacheValue(l),i.options[l]=e,u){if(i.dropdown_content.contains(u)){const h=i._render("option",e);Rt(u,h),i.activeOption===u&&i.setActiveOption(h)}u.remove()}p&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,l),r=i._render("item",e),p.classList.contains("active")&&se(r,"active"),Rt(p,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=tt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};K(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=de(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=de(t);return e!==null?this.control.querySelector(`[data-value="${cn(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);const o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];ln(this,i,()=>{var r,o;const s=this,l=s.settings.mode,d=de(t);if(!(d&&s.items.indexOf(d)!==-1&&(l==="single"&&s.close(),l==="single"||!s.settings.duplicates))&&!(d===null||!s.options.hasOwnProperty(d))&&(l==="single"&&s.clear(e),!(l==="multi"&&s.isFull()))){if(r=s._render("item",s.options[d]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,d),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let u=s.getOption(d),p=s.getAdjacent(u,1);p&&s.setActiveOption(p)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&l!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",d,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,o;const s=t.dataset.value;r=un(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),me(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,l=d=>{if(i.unlock(),!d||typeof d!="object")return e();var u=de(d[i.settings.valueField]);if(typeof u!="string")return e();i.setTextboxValue(),i.addOption(d,!0),i.setCaret(r),i.addItem(u),e(d),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,l):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||l(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Sr(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let s=function(u,p,h){return u||(u=pe('<option value="'+_t(p)+'">'+_t(h)+"</option>")),u!=o&&e.input.append(u),l.push(u),(u!=o||d>0)&&(u.selected=!0),u};const l=[],d=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(u=>{u.selected=!1}),e.items.length==0&&e.settings.mode=="single"?s(o,"",""):e.items.forEach(u=>{if(i=e.options[u],r=i[e.settings.labelField]||"",l.includes(i.$option)){const p=e.input.querySelector(`option[value="${cn(u)}"]:not(:checked)`);s(p,u,r)}else i.$option=s(i.$option,u,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,j(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Ke(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Ke(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,j(e.focus_node,{"aria-expanded":"false"}),Ke(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Ke(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();K(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===fn?-1:1,i=Dr(s.control_input);const l=[];if(s.activeItems.length)o=dn(s.activeItems,e),r=un(o),e>0&&r++,K(s.activeItems,d=>l.push(d));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){const d=s.controlChildren();let u;e<0&&i.start===0&&i.length===0?u=d[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(u=d[s.caretPos]),u!==void 0&&l.push(u)}if(!s.shouldDelete(l,t))return!1;for(q(t,!0),typeof r<"u"&&s.setCaret(r);l.length;)s.removeItem(l.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(we(We,e)||we("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return dn(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,me(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,_t),!r))return null;if(r=pe(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?j(r,{"aria-disabled":"true"}):j(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],j(r,{"data-group":i}),e.group[o.settings.disabledField]&&j(r,{"data-disabled":""})),t==="option"||t==="item"){const s=tt(e[o.settings.valueField]);j(r,{"data-value":s}),t==="item"?(se(r,o.settings.itemClass),j(r,{"data-ts-item":""})):(se(r,o.settings.optionClass),j(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){K(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,l;return t==="after"&&(s=o.apply(r,arguments)),l=i.apply(r,arguments),t==="instead"?l:(t==="before"&&(s=o.apply(r,arguments)),s)}}}const Hr=(n,t,e,i)=>{n.addEventListener(t,e,i)};function jr(){Hr(this.input,"change",()=>{this.sync()})}const Rr=n=>typeof n>"u"||n===null?null:Vr(n),Vr=n=>typeof n=="boolean"?n?"1":"0":n+"",vn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Yr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Br(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Br=n=>typeof n=="string"&&n.indexOf("<")>-1;function qr(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(s,l){l?(s.checked=!0,i.uncheckedClassNames&&s.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&s.classList.add(...i.checkedClassNames)):(s.checked=!1,i.checkedClassNames&&s.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&s.classList.add(...i.uncheckedClassNames))},o=function(s){setTimeout(()=>{var l=s.querySelector("input."+i.className);l instanceof HTMLInputElement&&r(l,s.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(l,d)=>{var u=Yr(s.call(t,l,d)),p=document.createElement("input");i.className&&p.classList.add(i.className),p.addEventListener("click",function(m){vn(m)}),p.type="checkbox";const h=Rr(l[t.settings.valueField]);return r(p,!!(h&&t.items.indexOf(h)>-1)),u.prepend(p),u}}),t.on("item_remove",s=>{var l=t.getOption(s);l&&(l.classList.remove("selected"),o(l))}),t.on("item_add",s=>{var l=t.getOption(s);l&&o(l)}),t.hook("instead","onOptionSelect",(s,l)=>{if(l.classList.contains("selected")){l.classList.remove("selected"),t.removeItem(l.dataset.value),t.refreshOptions(),vn(s,!0);return}e.call(t,s,l),o(l)})}const zr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Kr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Kr=n=>typeof n=="string"&&n.indexOf("<")>-1;function Wr(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=zr(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const Ur=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},xe=(n,t,e,i)=>{n.addEventListener(t,e,i)},Qr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Gr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Jr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Jr=n=>typeof n=="string"&&n.indexOf("<")>-1,Xr=(n,t)=>{Qr(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Zr=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},es=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},ts=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function ns(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,l)=>{const d=Gr(o.call(n,s,l));Xr(d,{draggable:"true"});const u=y=>{i||Ur(y),y.stopPropagation()},p=y=>{r=d,setTimeout(()=>{d.classList.add("ts-dragging")},0)},h=y=>{y.preventDefault(),d.classList.add("ts-drag-over"),A(d,r)},m=()=>{d.classList.remove("ts-drag-over")},A=(y,k)=>{k!==void 0&&(ts(k,d)?Zr(y,k):es(y,k))},g=()=>{var y;document.querySelectorAll(".ts-drag-over").forEach(S=>S.classList.remove("ts-drag-over")),(y=r)==null||y.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(S=>{if(S.dataset.value){let b=S.dataset.value;b&&k.push(b)}}),n.setValue(k)};return xe(d,"mousedown",u),xe(d,"dragstart",p),xe(d,"dragenter",h),xe(d,"dragover",h),xe(d,"dragleave",m),xe(d,"dragend",g),d}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const is=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},rs=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ss(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ss=n=>typeof n=="string"&&n.indexOf("<")>-1;function os(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=rs(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{is(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const as=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ls=(n,...t)=>{var e=cs(t);n=ds(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},cs=n=>{var t=[];return as(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ds=n=>(Array.isArray(n)||(n=[n]),n),us=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function fs(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=us(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),ls(e,"last-active")}else n.setCaret(n.caretPos+t)})}const ps=27,hs=9,gs=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ms=(n,t,e,i)=>{n.addEventListener(t,e,i)},vs=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},bn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(bs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},bs=n=>typeof n=="string"&&n.indexOf("<")>-1,ys=(n,...t)=>{var e=ws(t);n=Cs(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ws=n=>{var t=[];return vs(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Cs=n=>(Array.isArray(n)||(n=[n]),n);function Os(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,ys(n.control_input,"dropdown-input");const t=bn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=bn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case ps:n.isOpen&&(gs(e,!0),n.close()),n.clearActiveItems();return;case hs:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),ms(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const Ue=(n,t,e,i)=>{n.addEventListener(t,e,i)};function _s(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),Ue(e,"input",r),Ue(e,"keyup",r),Ue(e,"blur",r),Ue(e,"update",r)})}function Ds(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function As(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const yn=37,Ss=39,xs=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Es=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Is(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===yn||e.keyCode===Ss))return t.call(n,e);n.ignoreHover=!0,s=xs(n.activeOption,"[data-group]"),i=Es(n.activeOption,"[data-selectable]"),s&&(e.keyCode===yn?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}const ks=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),wn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Cn=(n,t,e,i)=>{n.addEventListener(t,e,i)},On=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ms(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ms=n=>typeof n=="string"&&n.indexOf("<")>-1;function Ls(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+ks(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var l=On(r.call(e,o,s)),d=On(i);return l.appendChild(d),Cn(d,"mousedown",u=>{wn(u,!0)}),Cn(d,"click",u=>{e.isLocked||(wn(u,!0),!e.isLocked&&e.shouldDelete([l],u)&&(e.removeItem(l),e.refreshOptions(!1),e.inputState()))}),l}})}}function Fs(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const Ts=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ps=(n,...t)=>{var e=$s(t);n=Ns(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},$s=n=>{var t=[];return Ts(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Ns=n=>(Array.isArray(n)||(n=[n]),n);function Hs(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,l,d=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var h=n.selectable(),m=Array.from(h).indexOf(n.activeOption);if(m>=h.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const u=h=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(h in r&&r[h]),p=(h,m)=>n.items.indexOf(m)>=0||d.indexOf(m)>=0;n.setNextUrl=(h,m)=>{r[h]=m},n.getUrl=h=>{if(h in r){const m=r[h];return r[h]=!1,m}return n.clearPagination(),n.settings.firstUrl.call(n,h)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",h=>h in r?u(h):t.call(n,h)),n.hook("instead","loadCallback",(h,m)=>{if(!s)n.clearOptions(p);else if(l){const A=h[0];A!==void 0&&(l.dataset.value=A[n.settings.valueField])}i.call(n,h,m),s=!1}),n.hook("after","refreshOptions",()=>{const h=n.lastValue;var m;u(h)?(m=n.render("loading_more",{query:h}),m&&(m.setAttribute("data-selectable",""),l=m)):h in r&&!o.querySelector(".no-results")&&(m=n.render("no_more_results",{query:h})),m&&(Ps(m,n.settings.optionClass),o.append(m))}),n.on("initialize",()=>{d=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}Z.define("change_listener",jr);Z.define("checkbox_options",qr);Z.define("clear_button",Wr);Z.define("drag_drop",ns);Z.define("dropdown_header",os);Z.define("caret_position",fs);Z.define("dropdown_input",Os);Z.define("input_autogrow",_s);Z.define("no_backspace_delete",Ds);Z.define("no_active_items",As);Z.define("optgroup_columns",Is);Z.define("remove_button",Ls);Z.define("restore_on_backspace",Fs);Z.define("virtual_scroll",Hs);const js=n=>({init(){const t=this.$refs[`select_picker_${n.dataField}_${n.tableName}`],e={items:n.initialValues,...n.framework,onChange:o=>{Bn(n,o)},onInitialize:()=>{window.addEventListener(`pg:clear_multi_select::${n.tableName}:${n.dataField}`,()=>{t&&t.tomselect.clear(!0)}),window.addEventListener(`pg:clear_all_multi_select::${n.tableName}`,()=>{t&&t.tomselect.clear(!0)})}},i={valueField:n.optionValue,labelField:n.optionLabel,searchField:n.optionLabel,load:async function(o,s){function l(d,u){var p;const{method:h,url:m}=d,A=new Request(m,{method:h,body:h.toLowerCase()==="post"?JSON.stringify({search:u,...r}):void 0});A.headers.set("Content-Type","application/json"),A.headers.set("Accept","application/json"),A.headers.set("X-Requested-With","XMLHttpRequest");const g=(p=document.head.querySelector('[name="csrf-token"]'))==null?void 0:p.getAttribute("content");return g&&A.headers.set("X-CSRF-TOKEN",g),A}fetch(l(n.asyncData,o)).then(d=>d.json()).then(d=>{s(d)}).catch(()=>{s()})},render:{option:function(o,s){return`<div class="py-2 mb-1"><span>${s(o[n.optionLabel])}</span></div>`},item:function(o,s){return`<div class="py-2 mb-1"><span>${s(o[n.optionLabel])}</span></div>`}}};let r=e;n.hasOwnProperty("asyncData")&&(r=Object.assign(e,i)),new Z(t,r)}}),Rs=n=>({initialValues:n.initialValues,framework:n.framework,init(){const t=this.$refs["select_picker_"+n.dataField+"_"+n.tableName],e=this.deepCopy(this.framework);new window.SlimSelect({select:t,...e,events:{afterChange:i=>{let r=i.map(o=>o.value);Bn(n,r)}}})},deepCopy(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(this.deepCopy);const e={};for(const i in t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}}),Vs=()=>({init(){Livewire.on("pg:scrollTop",n=>{setTimeout(()=>{document.querySelector("body").scrollIntoView({behavior:"auto"})},0)}),new IntersectionObserver(n=>{n[0].isIntersecting&&this.$wire.call("loadMore")},{rootMargin:"300px"}).observe(this.$el)}}),Ys=n=>({rowId:(n==null?void 0:n.rowId)??null,parentId:(n==null?void 0:n.parentId)??null,toHtml(){let t=null;const e=this.parentId??this.$wire.id;if(this.rowId){const r=window[`pgActions_${e}`];r&&r[this.rowId]!==void 0&&(t=r[this.rowId])}else t=window[`pgActionsHeader_${e}`];if(typeof t!="object"||t===null)return"";let i="";return t.forEach(r=>{let o=this.shouldHideAction(r),s=this.getReplaceHtml(r);if(!o)if(s)i+=s;else{let l=this.buildAttributesString(r);if(r.icon){let d=this.processIcon(r);if(!d)return;i+=this.buildActionHtmlWithIcon(r,l,d)}else i+=this.buildActionHtml(r,l)}}),i},shouldHideAction(t){if(t.can===!1)return!0;let e=!1;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.action.includes(t.action)&&i.apply&&i.rule.hide&&(e=!0)}),e},getReplaceHtml(t){let e=null;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.replaceHtml&&(e=i.replaceHtml)}),e},buildAttributesString(t){let e=t.attributes??[];return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.rule.setAttribute&&i.rule.setAttribute.length>0&&Object.values(i.rule.setAttribute).forEach(r=>{e[r.attribute]=r.value})}),Object.entries(e).map(([i,r])=>` ${i}="${r}"`).join("")},processIcon(t){const e=Object.entries(t.iconAttributes??[]).map(([r,o])=>` ${r}="${o}"`).join("");let i=window.pgResourceIcons[t.icon];return typeof i>"u"?(console.warn(`PowerGrid: Unable to load icons in javascript window in row: [${this.rowId}]`),null):this.replaceIconAttributes(i,e)},replaceIconAttributes(t,e){return t.replace(/<([^\s>]+)([^>]*)>/,(i,r,o)=>{let s=o.trim();const l=e.replace(/class="([^"]*)"/,(d,u)=>(s.includes("class=")?s=s.replace(/class="([^"]*)"/,(p,h)=>`class="${h} ${u.trim()}"`):s+=` ${d}`,""));return`<${r} ${s} ${l}>`})},buildActionHtmlWithIcon(t,e,i){return t.slot?`<${t.tag??"button"} ${e}>${i} ${t.slot}</${t.tag??"button"}>`:`<${t.tag??"button"} ${e}>${i}</${t.tag??"button"}>`},buildActionHtml(t,e){return`<${t.tag??"button"} ${e}>${t.slot}</${t.tag??"button"}>`}}),Bs=n=>({templateContent:(n==null?void 0:n.templateContent)??null,rendered:null,parentId:(n==null?void 0:n.parentId)??null,init(){const t=Object.keys(this.templateContent)[0],e=window[`pgRowTemplates_${this.parentId??this.$wire.id}`][t],i=this.templateContent[t];if(i){let r=e;for(const[o,s]of Object.entries(i)){const l=`{{ ${o} }}`,d=String(s).replace(/'/g,"\\'");r=r.replaceAll(l,d)}this.rendered=r}}}),qs=n=>({rowId:n.rowId,rules:n.rules,defaultClasses:n.defaultClasses,attributes:[],theme:[],init(){this.rules&&Object.values(this.rules).forEach(t=>{(t.applyLoop||t.apply)&&t!=null&&t.attributes&&this.attributes.push(t.attributes)})},getAttributes(){let t={class:this.defaultClasses};return this.attributes.forEach(e=>{Object.keys(e).forEach(i=>{t[i]+=t[i]?` ${e[i]}`:e[i]})}),t}});window.pgToggleable=Yi;window.pgFlatpickr=qi;window.pgEditable=zi;window.pgResponsive=Xi;window.pgTomSelect=js;window.pgSlimSelect=Rs;window.pgLoadMore=Vs;window.pgRenderActions=Ys;window.pgRowAttributes=qs;window.pgRenderRowTemplate=Bs;document.addEventListener("DOMContentLoaded",()=>{Livewire.hook("commit",({component:n,succeed:t,fail:e})=>{n.ephemeral.setUp&&n.ephemeral.setUp.hasOwnProperty("responsive")&&(t(()=>{queueMicrotask(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))})}),e(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))}))})});document.addEventListener("DOMContentLoaded",()=>{window.Alpine.directive("multisort-shift-click",(n,{expression:t})=>{n.addEventListener("click",e=>{window.Livewire.find(t).set("multiSort",e.shiftKey)})})});var xt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ke={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ne={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ne=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},ce=function(n){return n===!0?1:0};function _n(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var Et=function(n){return n instanceof Array?n:[n]};function J(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function $(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function Qe(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Jn(n,t){if(t(n))return n;if(n.parentNode)return Jn(n.parentNode,t)}function Ge(n,t){var e=$("div","numInputWrapper"),i=$("input","numInput "+n),r=$("span","arrowUp"),o=$("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var s in t)i.setAttribute(s,t[s]);return e.appendChild(i),e.appendChild(r),e.appendChild(o),e}function oe(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var It=function(){},ot=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},zs={D:It,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*ce(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:It,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:It,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},De={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Pe={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Pe.w(n,t,e)]},F:function(n,t,e){return ot(Pe.n(n,t,e)-1,!1,t)},G:function(n,t,e){return ne(Pe.h(n,t,e))},H:function(n){return ne(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[ce(n.getHours()>11)]},M:function(n,t){return ot(n.getMonth(),!0,t)},S:function(n){return ne(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return ne(n.getFullYear(),4)},d:function(n){return ne(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ne(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return ne(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Xn=function(n){var t=n.config,e=t===void 0?ke:t,i=n.l10n,r=i===void 0?Ne:i,o=n.isMobile,s=o===void 0?!1:o;return function(l,d,u){var p=u||r;return e.formatDate!==void 0&&!s?e.formatDate(l,d,p):d.split("").map(function(h,m,A){return Pe[h]&&A[m-1]!=="\\"?Pe[h](l,p,e):h!=="\\"?h:""}).join("")}},Vt=function(n){var t=n.config,e=t===void 0?ke:t,i=n.l10n,r=i===void 0?Ne:i;return function(o,s,l,d){if(!(o!==0&&!o)){var u=d||r,p,h=o;if(o instanceof Date)p=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)p=new Date(o);else if(typeof o=="string"){var m=s||(e||ke).dateFormat,A=String(o).trim();if(A==="today")p=new Date,l=!0;else if(e&&e.parseDate)p=e.parseDate(o,m);else if(/Z$/.test(A)||/GMT$/.test(A))p=new Date(o);else{for(var g=void 0,y=[],k=0,S=0,b="";k<m.length;k++){var M=m[k],N=M==="\\",ie=m[k-1]==="\\"||N;if(De[M]&&!ie){b+=De[M];var B=new RegExp(b).exec(o);B&&(g=!0)&&y[M!=="Y"?"push":"unshift"]({fn:zs[M],val:B[++S]})}else N||(b+=".")}p=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),y.forEach(function(O){var D=O.fn,C=O.val;return p=D(p,C,u)||p}),p=g?p:void 0}}if(!(p instanceof Date&&!isNaN(p.getTime()))){e.errorHandler(new Error("Invalid date provided: "+h));return}return l===!0&&p.setHours(0,0,0,0),p}}};function le(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Ks=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},kt=function(n,t,e){return n*3600+t*60+e},Ws=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},Us={DAY:864e5};function Mt(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var r=n.minDate.getHours(),o=n.minDate.getMinutes(),s=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<o&&(e=o),t===r&&e===o&&i<s&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var l=n.maxDate.getHours(),d=n.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(d,e)),t===l&&e===d&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(d){return n[d]=l[d]})},r=0,o=t;r<o.length;r++){var s=o[r];i(s)}return n});var Q=function(){return Q=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Q.apply(this,arguments)},Dn=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),r=0,t=0;t<e;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)i[r]=o[s];return i},Qs=300;function Gs(n,t){var e={config:Q(Q({},ke),z.defaultConfig),l10n:Ne};e.parseDate=Vt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=y,e._setHoursFromDate=m,e._positionCalendar=Ye,e.changeMonth=pt,e.changeYear=je,e.clear=ui,e.close=fi,e.onMouseOver=Ve,e._createElement=$,e.createDay=B,e.destroy=pi,e.isEnabled=be,e.jumpToDate=b,e.updateValue=ge,e.open=mi,e.redraw=Zt,e.set=wi,e.setDate=Ci,e.toggle=Ai;function i(){e.utils={getDaysInMonth:function(a,c){return a===void 0&&(a=e.currentMonth),c===void 0&&(c=e.currentYear),a===1&&(c%4===0&&c%100!==0||c%400===0)?29:e.l10n.daysInMonth[a]}}}function r(){e.element=e.input=n,e.isOpen=!1,vi(),Xt(),_i(),Oi(),i(),e.isMobile||ie(),S(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),ge(!1)),l();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&a&&Ye(),V("onReady")}function o(){var a;return((a=e.calendarContainer)===null||a===void 0?void 0:a.getRootNode()).activeElement||document.activeElement}function s(a){return a.bind(e)}function l(){var a=e.config;a.weekNumbers===!1&&a.showMonths===1||a.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var c=(e.days.offsetWidth+1)*a.showMonths;e.daysContainer.style.width=c+"px",e.calendarContainer.style.width=c+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function d(a){if(e.selectedDates.length===0){var c=e.config.minDate===void 0||le(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),f=Mt(e.config);c.setHours(f.hours,f.minutes,f.seconds,c.getMilliseconds()),e.selectedDates=[c],e.latestSelectedDateObj=c}a!==void 0&&a.type!=="blur"&&Ei(a);var v=e._input.value;h(),ge(),e._input.value!==v&&e._debouncedChange()}function u(a,c){return a%12+12*ce(c===e.l10n.amPM[1])}function p(a){switch(a%24){case 0:case 12:return 12;default:return a%12}}function h(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var a=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,c=(parseInt(e.minuteElement.value,10)||0)%60,f=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(a=u(a,e.amPM.textContent));var v=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.minDate,!0)===0,w=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var _=kt(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),F=kt(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),I=kt(a,c,f);if(I>F&&I<_){var P=Ws(_);a=P[0],c=P[1],f=P[2]}}else{if(w){var x=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;a=Math.min(a,x.getHours()),a===x.getHours()&&(c=Math.min(c,x.getMinutes())),c===x.getMinutes()&&(f=Math.min(f,x.getSeconds()))}if(v){var L=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;a=Math.max(a,L.getHours()),a===L.getHours()&&c<L.getMinutes()&&(c=L.getMinutes()),c===L.getMinutes()&&(f=Math.max(f,L.getSeconds()))}}A(a,c,f)}}function m(a){var c=a||e.latestSelectedDateObj;c&&c instanceof Date&&A(c.getHours(),c.getMinutes(),c.getSeconds())}function A(a,c,f){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(a%24,c,f||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ne(e.config.time_24hr?a:(12+a)%12+12*ce(a%12===0)),e.minuteElement.value=ne(c),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[ce(a>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ne(f)))}function g(a){var c=oe(a),f=parseInt(c.value)+(a.delta||0);(f/1e3>1||a.key==="Enter"&&!/[^\d]/.test(f.toString()))&&je(f)}function y(a,c,f,v){if(c instanceof Array)return c.forEach(function(w){return y(a,w,f,v)});if(a instanceof Array)return a.forEach(function(w){return y(w,c,f,v)});a.addEventListener(c,f,v),e._handlers.push({remove:function(){return a.removeEventListener(c,f,v)}})}function k(){V("onChange")}function S(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(f){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+f+"]"),function(v){return y(v,"click",e[f])})}),e.isMobile){Di();return}var a=_n(gi,50);if(e._debouncedChange=_n(k,Qs),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&y(e.daysContainer,"mouseover",function(f){e.config.mode==="range"&&Ve(oe(f))}),y(e._input,"keydown",Qt),e.calendarContainer!==void 0&&y(e.calendarContainer,"keydown",Qt),!e.config.inline&&!e.config.static&&y(window,"resize",a),window.ontouchstart!==void 0?y(window.document,"touchstart",ht):y(window.document,"mousedown",ht),y(window.document,"focus",ht,{capture:!0}),e.config.clickOpens===!0&&(y(e._input,"focus",e.open),y(e._input,"click",e.open)),e.daysContainer!==void 0&&(y(e.monthNav,"click",xi),y(e.monthNav,["keyup","increment"],g),y(e.daysContainer,"click",en)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var c=function(f){return oe(f).select()};y(e.timeContainer,["increment"],d),y(e.timeContainer,"blur",d,{capture:!0}),y(e.timeContainer,"click",M),y([e.hourElement,e.minuteElement],["focus","click"],c),e.secondElement!==void 0&&y(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&y(e.amPM,"click",function(f){d(f)})}e.config.allowInput&&y(e._input,"blur",hi)}function b(a,c){var f=a!==void 0?e.parseDate(a):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),v=e.currentYear,w=e.currentMonth;try{f!==void 0&&(e.currentYear=f.getFullYear(),e.currentMonth=f.getMonth())}catch(_){_.message="Invalid date supplied: "+f,e.config.errorHandler(_)}c&&e.currentYear!==v&&(V("onYearChange"),U()),c&&(e.currentYear!==v||e.currentMonth!==w)&&V("onMonthChange"),e.redraw()}function M(a){var c=oe(a);~c.className.indexOf("arrow")&&N(a,c.classList.contains("arrowUp")?1:-1)}function N(a,c,f){var v=a&&oe(a),w=f||v&&v.parentNode&&v.parentNode.firstChild,_=mt("increment");_.delta=c,w&&w.dispatchEvent(_)}function ie(){var a=window.document.createDocumentFragment();if(e.calendarContainer=$("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(a.appendChild(li()),e.innerContainer=$("div","flatpickr-innerContainer"),e.config.weekNumbers){var c=di(),f=c.weekWrapper,v=c.weekNumbers;e.innerContainer.appendChild(f),e.weekNumbers=v,e.weekWrapper=f}e.rContainer=$("div","flatpickr-rContainer"),e.rContainer.appendChild(Wt()),e.daysContainer||(e.daysContainer=$("div","flatpickr-days"),e.daysContainer.tabIndex=-1),te(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),a.appendChild(e.innerContainer)}e.config.enableTime&&a.appendChild(ci()),J(e.calendarContainer,"rangeMode",e.config.mode==="range"),J(e.calendarContainer,"animate",e.config.animate===!0),J(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(a);var w=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!w&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var _=$("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(_,e.element),_.appendChild(e.element),e.altInput&&_.appendChild(e.altInput),_.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function B(a,c,f,v){var w=be(c,!0),_=$("span",a,c.getDate().toString());return _.dateObj=c,_.$i=v,_.setAttribute("aria-label",e.formatDate(c,e.config.ariaDateFormat)),a.indexOf("hidden")===-1&&le(c,e.now)===0&&(e.todayDateElem=_,_.classList.add("today"),_.setAttribute("aria-current","date")),w?(_.tabIndex=-1,vt(c)&&(_.classList.add("selected"),e.selectedDateElem=_,e.config.mode==="range"&&(J(_,"startRange",e.selectedDates[0]&&le(c,e.selectedDates[0],!0)===0),J(_,"endRange",e.selectedDates[1]&&le(c,e.selectedDates[1],!0)===0),a==="nextMonthDay"&&_.classList.add("inRange")))):_.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Si(c)&&!vt(c)&&_.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&a!=="prevMonthDay"&&v%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(c)+"</span>"),V("onDayCreate",_),_}function O(a){a.focus(),e.config.mode==="range"&&Ve(a)}function D(a){for(var c=a>0?0:e.config.showMonths-1,f=a>0?e.config.showMonths:-1,v=c;v!=f;v+=a)for(var w=e.daysContainer.children[v],_=a>0?0:w.children.length-1,F=a>0?w.children.length:-1,I=_;I!=F;I+=a){var P=w.children[I];if(P.className.indexOf("hidden")===-1&&be(P.dateObj))return P}}function C(a,c){for(var f=a.className.indexOf("Month")===-1?a.dateObj.getMonth():e.currentMonth,v=c>0?e.config.showMonths:-1,w=c>0?1:-1,_=f-e.currentMonth;_!=v;_+=w)for(var F=e.daysContainer.children[_],I=f-e.currentMonth===_?a.$i+c:c<0?F.children.length-1:0,P=F.children.length,x=I;x>=0&&x<P&&x!=(c>0?P:-1);x+=w){var L=F.children[x];if(L.className.indexOf("hidden")===-1&&be(L.dateObj)&&Math.abs(a.$i-x)>=Math.abs(c))return O(L)}e.changeMonth(w),T(D(w),0)}function T(a,c){var f=o(),v=Re(f||document.body),w=a!==void 0?a:v?f:e.selectedDateElem!==void 0&&Re(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Re(e.todayDateElem)?e.todayDateElem:D(c>0?1:-1);w===void 0?e._input.focus():v?C(w,c):O(w)}function E(a,c){for(var f=(new Date(a,c,1).getDay()-e.l10n.firstDayOfWeek+7)%7,v=e.utils.getDaysInMonth((c-1+12)%12,a),w=e.utils.getDaysInMonth(c,a),_=window.document.createDocumentFragment(),F=e.config.showMonths>1,I=F?"prevMonthDay hidden":"prevMonthDay",P=F?"nextMonthDay hidden":"nextMonthDay",x=v+1-f,L=0;x<=v;x++,L++)_.appendChild(B("flatpickr-day "+I,new Date(a,c-1,x),x,L));for(x=1;x<=w;x++,L++)_.appendChild(B("flatpickr-day",new Date(a,c,x),x,L));for(var H=w+1;H<=42-f&&(e.config.showMonths===1||L%7!==0);H++,L++)_.appendChild(B("flatpickr-day "+P,new Date(a,c+1,H%w),H,L));var fe=$("div","dayContainer");return fe.appendChild(_),fe}function te(){if(e.daysContainer!==void 0){Qe(e.daysContainer),e.weekNumbers&&Qe(e.weekNumbers);for(var a=document.createDocumentFragment(),c=0;c<e.config.showMonths;c++){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+c),a.appendChild(E(f.getFullYear(),f.getMonth()))}e.daysContainer.appendChild(a),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ve()}}function U(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var a=function(v){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&v<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&v>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var c=0;c<12;c++)if(a(c)){var f=$("option","flatpickr-monthDropdown-month");f.value=new Date(e.currentYear,c).getMonth().toString(),f.textContent=ot(c,e.config.shorthandCurrentMonth,e.l10n),f.tabIndex=-1,e.currentMonth===c&&(f.selected=!0),e.monthsDropdownContainer.appendChild(f)}}}function Le(){var a=$("div","flatpickr-month"),c=window.document.createDocumentFragment(),f;e.config.showMonths>1||e.config.monthSelectorType==="static"?f=$("span","cur-month"):(e.monthsDropdownContainer=$("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),y(e.monthsDropdownContainer,"change",function(F){var I=oe(F),P=parseInt(I.value,10);e.changeMonth(P-e.currentMonth),V("onMonthChange")}),U(),f=e.monthsDropdownContainer);var v=Ge("cur-year",{tabindex:"-1"}),w=v.getElementsByTagName("input")[0];w.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&w.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(w.setAttribute("max",e.config.maxDate.getFullYear().toString()),w.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var _=$("div","flatpickr-current-month");return _.appendChild(f),_.appendChild(v),c.appendChild(_),a.appendChild(c),{container:a,yearElement:w,monthElement:f}}function Ae(){Qe(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var a=e.config.showMonths;a--;){var c=Le();e.yearElements.push(c.yearElement),e.monthElements.push(c.monthElement),e.monthNav.appendChild(c.container)}e.monthNav.appendChild(e.nextMonthNav)}function li(){return e.monthNav=$("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=$("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=$("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Ae(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(a){e.__hidePrevMonthArrow!==a&&(J(e.prevMonthNav,"flatpickr-disabled",a),e.__hidePrevMonthArrow=a)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(a){e.__hideNextMonthArrow!==a&&(J(e.nextMonthNav,"flatpickr-disabled",a),e.__hideNextMonthArrow=a)}}),e.currentYearElement=e.yearElements[0],qe(),e.monthNav}function ci(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var a=Mt(e.config);e.timeContainer=$("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var c=$("span","flatpickr-time-separator",":"),f=Ge("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=f.getElementsByTagName("input")[0];var v=Ge("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=v.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?a.hours:p(a.hours)),e.minuteElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():a.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(f),e.timeContainer.appendChild(c),e.timeContainer.appendChild(v),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var w=Ge("flatpickr-second");e.secondElement=w.getElementsByTagName("input")[0],e.secondElement.value=ne(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():a.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild($("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(w)}return e.config.time_24hr||(e.amPM=$("span","flatpickr-am-pm",e.l10n.amPM[ce((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Wt(){e.weekdayContainer?Qe(e.weekdayContainer):e.weekdayContainer=$("div","flatpickr-weekdays");for(var a=e.config.showMonths;a--;){var c=$("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(c)}return Ut(),e.weekdayContainer}function Ut(){if(e.weekdayContainer){var a=e.l10n.firstDayOfWeek,c=Dn(e.l10n.weekdays.shorthand);a>0&&a<c.length&&(c=Dn(c.splice(a,c.length),c.splice(0,a)));for(var f=e.config.showMonths;f--;)e.weekdayContainer.children[f].innerHTML=`
      <span class='flatpickr-weekday'>
        `+c.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function di(){e.calendarContainer.classList.add("hasWeeks");var a=$("div","flatpickr-weekwrapper");a.appendChild($("span","flatpickr-weekday",e.l10n.weekAbbreviation));var c=$("div","flatpickr-weeks");return a.appendChild(c),{weekWrapper:a,weekNumbers:c}}function pt(a,c){c===void 0&&(c=!0);var f=c?a:a-e.currentMonth;f<0&&e._hidePrevMonthArrow===!0||f>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=f,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,V("onYearChange"),U()),te(),V("onMonthChange"),qe())}function ui(a,c){if(a===void 0&&(a=!0),c===void 0&&(c=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,c===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var f=Mt(e.config),v=f.hours,w=f.minutes,_=f.seconds;A(v,w,_)}e.redraw(),a&&V("onChange")}function fi(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),V("onClose")}function pi(){e.config!==void 0&&V("onDestroy");for(var a=e._handlers.length;a--;)e._handlers[a].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var c=e.calendarContainer.parentNode;if(c.lastChild&&c.removeChild(c.lastChild),c.parentNode){for(;c.firstChild;)c.parentNode.insertBefore(c.firstChild,c);c.parentNode.removeChild(c)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(f){try{delete e[f]}catch{}})}function Fe(a){return e.calendarContainer.contains(a)}function ht(a){if(e.isOpen&&!e.config.inline){var c=oe(a),f=Fe(c),v=c===e.input||c===e.altInput||e.element.contains(c)||a.path&&a.path.indexOf&&(~a.path.indexOf(e.input)||~a.path.indexOf(e.altInput)),w=!v&&!f&&!Fe(a.relatedTarget),_=!e.config.ignoredFocusElements.some(function(F){return F.contains(c)});w&&_&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&d(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function je(a){if(!(!a||e.config.minDate&&a<e.config.minDate.getFullYear()||e.config.maxDate&&a>e.config.maxDate.getFullYear())){var c=a,f=e.currentYear!==c;e.currentYear=c||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),f&&(e.redraw(),V("onYearChange"),U())}}function be(a,c){var f;c===void 0&&(c=!0);var v=e.parseDate(a,void 0,c);if(e.config.minDate&&v&&le(v,e.config.minDate,c!==void 0?c:!e.minDateHasTime)<0||e.config.maxDate&&v&&le(v,e.config.maxDate,c!==void 0?c:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(v===void 0)return!1;for(var w=!!e.config.enable,_=(f=e.config.enable)!==null&&f!==void 0?f:e.config.disable,F=0,I=void 0;F<_.length;F++){if(I=_[F],typeof I=="function"&&I(v))return w;if(I instanceof Date&&v!==void 0&&I.getTime()===v.getTime())return w;if(typeof I=="string"){var P=e.parseDate(I,void 0,!0);return P&&P.getTime()===v.getTime()?w:!w}else if(typeof I=="object"&&v!==void 0&&I.from&&I.to&&v.getTime()>=I.from.getTime()&&v.getTime()<=I.to.getTime())return w}return!w}function Re(a){return e.daysContainer!==void 0?a.className.indexOf("hidden")===-1&&a.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(a):!1}function hi(a){var c=a.target===e._input,f=e._input.value.trimEnd()!==bt();c&&f&&!(a.relatedTarget&&Fe(a.relatedTarget))&&e.setDate(e._input.value,!0,a.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Qt(a){var c=oe(a),f=e.config.wrap?n.contains(c):c===e._input,v=e.config.allowInput,w=e.isOpen&&(!v||!f),_=e.config.inline&&f&&!v;if(a.keyCode===13&&f){if(v)return e.setDate(e._input.value,!0,c===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),c.blur();e.open()}else if(Fe(c)||w||_){var F=!!e.timeContainer&&e.timeContainer.contains(c);switch(a.keyCode){case 13:F?(a.preventDefault(),d(),gt()):en(a);break;case 27:a.preventDefault(),gt();break;case 8:case 46:f&&!e.config.allowInput&&(a.preventDefault(),e.clear());break;case 37:case 39:if(!F&&!f){a.preventDefault();var I=o();if(e.daysContainer!==void 0&&(v===!1||I&&Re(I))){var P=a.keyCode===39?1:-1;a.ctrlKey?(a.stopPropagation(),pt(P),T(D(1),0)):T(void 0,P)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:a.preventDefault();var x=a.keyCode===40?1:-1;e.daysContainer&&c.$i!==void 0||c===e.input||c===e.altInput?a.ctrlKey?(a.stopPropagation(),je(e.currentYear-x),T(D(1),0)):F||T(void 0,x*7):c===e.currentYearElement?je(e.currentYear-x):e.config.enableTime&&(!F&&e.hourElement&&e.hourElement.focus(),d(a),e._debouncedChange());break;case 9:if(F){var L=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(re){return re}),H=L.indexOf(c);if(H!==-1){var fe=L[H+(a.shiftKey?-1:1)];a.preventDefault(),(fe||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(c)&&a.shiftKey&&(a.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&c===e.amPM)switch(a.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],h(),ge();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],h(),ge();break}(f||Fe(c))&&V("onKeyDown",a)}function Ve(a,c){if(c===void 0&&(c="flatpickr-day"),!(e.selectedDates.length!==1||a&&(!a.classList.contains(c)||a.classList.contains("flatpickr-disabled")))){for(var f=a?a.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),v=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),w=Math.min(f,e.selectedDates[0].getTime()),_=Math.max(f,e.selectedDates[0].getTime()),F=!1,I=0,P=0,x=w;x<_;x+=Us.DAY)be(new Date(x),!0)||(F=F||x>w&&x<_,x<v&&(!I||x>I)?I=x:x>v&&(!P||x<P)&&(P=x));var L=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+c));L.forEach(function(H){var fe=H.dateObj,re=fe.getTime(),Te=I>0&&re<I||P>0&&re>P;if(Te){H.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Se){H.classList.remove(Se)});return}else if(F&&!Te)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Se){H.classList.remove(Se)}),a!==void 0&&(a.classList.add(f<=e.selectedDates[0].getTime()?"startRange":"endRange"),v<f&&re===v?H.classList.add("startRange"):v>f&&re===v&&H.classList.add("endRange"),re>=I&&(P===0||re<=P)&&Ks(re,v,f)&&H.classList.add("inRange"))})}}function gi(){e.isOpen&&!e.config.static&&!e.config.inline&&Ye()}function mi(a,c){if(c===void 0&&(c=e._positionElement),e.isMobile===!0){if(a){a.preventDefault();var f=oe(a);f&&f.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),V("onOpen");return}else if(e._input.disabled||e.config.inline)return;var v=e.isOpen;e.isOpen=!0,v||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),V("onOpen"),Ye(c)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(a===void 0||!e.timeContainer.contains(a.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Gt(a){return function(c){var f=e.config["_"+a+"Date"]=e.parseDate(c,e.config.dateFormat),v=e.config["_"+(a==="min"?"max":"min")+"Date"];f!==void 0&&(e[a==="min"?"minDateHasTime":"maxDateHasTime"]=f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(w){return be(w)}),!e.selectedDates.length&&a==="min"&&m(f),ge()),e.daysContainer&&(Zt(),f!==void 0?e.currentYearElement[a]=f.getFullYear().toString():e.currentYearElement.removeAttribute(a),e.currentYearElement.disabled=!!v&&f!==void 0&&v.getFullYear()===f.getFullYear())}}function vi(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],c=Q(Q({},JSON.parse(JSON.stringify(n.dataset||{}))),t),f={};e.config.parseDate=c.parseDate,e.config.formatDate=c.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(L){e.config._enable=nn(L)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(L){e.config._disable=nn(L)}});var v=c.mode==="time";if(!c.dateFormat&&(c.enableTime||v)){var w=z.defaultConfig.dateFormat||ke.dateFormat;f.dateFormat=c.noCalendar||v?"H:i"+(c.enableSeconds?":S":""):w+" H:i"+(c.enableSeconds?":S":"")}if(c.altInput&&(c.enableTime||v)&&!c.altFormat){var _=z.defaultConfig.altFormat||ke.altFormat;f.altFormat=c.noCalendar||v?"h:i"+(c.enableSeconds?":S K":" K"):_+(" h:i"+(c.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Gt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Gt("max")});var F=function(L){return function(H){e.config[L==="min"?"_minTime":"_maxTime"]=e.parseDate(H,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:F("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:F("max")}),c.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,f,c);for(var I=0;I<a.length;I++)e.config[a[I]]=e.config[a[I]]===!0||e.config[a[I]]==="true";xt.filter(function(L){return e.config[L]!==void 0}).forEach(function(L){e.config[L]=Et(e.config[L]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var I=0;I<e.config.plugins.length;I++){var P=e.config.plugins[I](e)||{};for(var x in P)xt.indexOf(x)>-1?e.config[x]=Et(P[x]).map(s).concat(e.config[x]):typeof c[x]>"u"&&(e.config[x]=P[x])}c.altInputClass||(e.config.altInputClass=Jt().className+" "+e.config.altInputClass),V("onParseConfig")}function Jt(){return e.config.wrap?n.querySelector("[data-input]"):n}function Xt(){typeof e.config.locale!="object"&&typeof z.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Q(Q({},z.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?z.l10ns[e.config.locale]:void 0),De.D="("+e.l10n.weekdays.shorthand.join("|")+")",De.l="("+e.l10n.weekdays.longhand.join("|")+")",De.M="("+e.l10n.months.shorthand.join("|")+")",De.F="("+e.l10n.months.longhand.join("|")+")",De.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var a=Q(Q({},t),JSON.parse(JSON.stringify(n.dataset||{})));a.time_24hr===void 0&&z.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Xn(e),e.parseDate=Vt({config:e.config,l10n:e.l10n})}function Ye(a){if(typeof e.config.position=="function")return void e.config.position(e,a);if(e.calendarContainer!==void 0){V("onPreCalendarPosition");var c=a||e._positionElement,f=Array.prototype.reduce.call(e.calendarContainer.children,function($i,Ni){return $i+Ni.offsetHeight},0),v=e.calendarContainer.offsetWidth,w=e.config.position.split(" "),_=w[0],F=w.length>1?w[1]:null,I=c.getBoundingClientRect(),P=window.innerHeight-I.bottom,x=_==="above"||_!=="below"&&P<f&&I.top>f,L=window.pageYOffset+I.top+(x?-f-2:c.offsetHeight+2);if(J(e.calendarContainer,"arrowTop",!x),J(e.calendarContainer,"arrowBottom",x),!e.config.inline){var H=window.pageXOffset+I.left,fe=!1,re=!1;F==="center"?(H-=(v-I.width)/2,fe=!0):F==="right"&&(H-=v-I.width,re=!0),J(e.calendarContainer,"arrowLeft",!fe&&!re),J(e.calendarContainer,"arrowCenter",fe),J(e.calendarContainer,"arrowRight",re);var Te=window.document.body.offsetWidth-(window.pageXOffset+I.right),Se=H+v>window.document.body.offsetWidth,Ii=Te+v>window.document.body.offsetWidth;if(J(e.calendarContainer,"rightMost",Se),!e.config.static)if(e.calendarContainer.style.top=L+"px",!Se)e.calendarContainer.style.left=H+"px",e.calendarContainer.style.right="auto";else if(!Ii)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Te+"px";else{var yt=bi();if(yt===void 0)return;var ki=window.document.body.offsetWidth,Mi=Math.max(0,ki/2-v/2),Li=".flatpickr-calendar.centerMost:before",Fi=".flatpickr-calendar.centerMost:after",Ti=yt.cssRules.length,Pi="{left:"+I.left+"px;right:auto;}";J(e.calendarContainer,"rightMost",!1),J(e.calendarContainer,"centerMost",!0),yt.insertRule(Li+","+Fi+Pi,Ti),e.calendarContainer.style.left=Mi+"px",e.calendarContainer.style.right="auto"}}}}function bi(){for(var a=null,c=0;c<document.styleSheets.length;c++){var f=document.styleSheets[c];if(f.cssRules){try{f.cssRules}catch{continue}a=f;break}}return a??yi()}function yi(){var a=document.createElement("style");return document.head.appendChild(a),a.sheet}function Zt(){e.config.noCalendar||e.isMobile||(U(),qe(),te())}function gt(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function en(a){a.preventDefault(),a.stopPropagation();var c=function(L){return L.classList&&L.classList.contains("flatpickr-day")&&!L.classList.contains("flatpickr-disabled")&&!L.classList.contains("notAllowed")},f=Jn(oe(a),c);if(f!==void 0){var v=f,w=e.latestSelectedDateObj=new Date(v.dateObj.getTime()),_=(w.getMonth()<e.currentMonth||w.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=v,e.config.mode==="single")e.selectedDates=[w];else if(e.config.mode==="multiple"){var F=vt(w);F?e.selectedDates.splice(parseInt(F),1):e.selectedDates.push(w)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=w,e.selectedDates.push(w),le(w,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(L,H){return L.getTime()-H.getTime()}));if(h(),_){var I=e.currentYear!==w.getFullYear();e.currentYear=w.getFullYear(),e.currentMonth=w.getMonth(),I&&(V("onYearChange"),U()),V("onMonthChange")}if(qe(),te(),ge(),!_&&e.config.mode!=="range"&&e.config.showMonths===1?O(v):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var P=e.config.mode==="single"&&!e.config.enableTime,x=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(P||x)&&gt()}k()}}var Be={locale:[Xt,Ut],showMonths:[Ae,l,Wt],minDate:[b],maxDate:[b],positionElement:[rn],clickOpens:[function(){e.config.clickOpens===!0?(y(e._input,"focus",e.open),y(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function wi(a,c){if(a!==null&&typeof a=="object"){Object.assign(e.config,a);for(var f in a)Be[f]!==void 0&&Be[f].forEach(function(v){return v()})}else e.config[a]=c,Be[a]!==void 0?Be[a].forEach(function(v){return v()}):xt.indexOf(a)>-1&&(e.config[a]=Et(c));e.redraw(),ge(!0)}function tn(a,c){var f=[];if(a instanceof Array)f=a.map(function(v){return e.parseDate(v,c)});else if(a instanceof Date||typeof a=="number")f=[e.parseDate(a,c)];else if(typeof a=="string")switch(e.config.mode){case"single":case"time":f=[e.parseDate(a,c)];break;case"multiple":f=a.split(e.config.conjunction).map(function(v){return e.parseDate(v,c)});break;case"range":f=a.split(e.l10n.rangeSeparator).map(function(v){return e.parseDate(v,c)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(a)));e.selectedDates=e.config.allowInvalidPreload?f:f.filter(function(v){return v instanceof Date&&be(v,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(v,w){return v.getTime()-w.getTime()})}function Ci(a,c,f){if(c===void 0&&(c=!1),f===void 0&&(f=e.config.dateFormat),a!==0&&!a||a instanceof Array&&a.length===0)return e.clear(c);tn(a,f),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),b(void 0,c),m(),e.selectedDates.length===0&&e.clear(!1),ge(c),c&&V("onChange")}function nn(a){return a.slice().map(function(c){return typeof c=="string"||typeof c=="number"||c instanceof Date?e.parseDate(c,void 0,!0):c&&typeof c=="object"&&c.from&&c.to?{from:e.parseDate(c.from,void 0),to:e.parseDate(c.to,void 0)}:c}).filter(function(c){return c})}function Oi(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var a=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);a&&tn(a,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function _i(){if(e.input=Jt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=$(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),rn()}function rn(){e._positionElement=e.config.positionElement||e._input}function Di(){var a=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=$("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=a,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=a==="datetime-local"?"Y-m-d\\TH:i:S":a==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}y(e.mobileInput,"change",function(c){e.setDate(oe(c).value,!1,e.mobileFormatStr),V("onChange"),V("onClose")})}function Ai(a){if(e.isOpen===!0)return e.close();e.open(a)}function V(a,c){if(e.config!==void 0){var f=e.config[a];if(f!==void 0&&f.length>0)for(var v=0;f[v]&&v<f.length;v++)f[v](e.selectedDates,e.input.value,e,c);a==="onChange"&&(e.input.dispatchEvent(mt("change")),e.input.dispatchEvent(mt("input")))}}function mt(a){var c=document.createEvent("Event");return c.initEvent(a,!0,!0),c}function vt(a){for(var c=0;c<e.selectedDates.length;c++){var f=e.selectedDates[c];if(f instanceof Date&&le(f,a)===0)return""+c}return!1}function Si(a){return e.config.mode!=="range"||e.selectedDates.length<2?!1:le(a,e.selectedDates[0])>=0&&le(a,e.selectedDates[1])<=0}function qe(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(a,c){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+c),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[c].textContent=ot(f.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=f.getMonth().toString(),a.value=f.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function bt(a){var c=a||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(f){return e.formatDate(f,c)}).filter(function(f,v,w){return e.config.mode!=="range"||e.config.enableTime||w.indexOf(f)===v}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function ge(a){a===void 0&&(a=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=bt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=bt(e.config.altFormat)),a!==!1&&V("onValueUpdate")}function xi(a){var c=oe(a),f=e.prevMonthNav.contains(c),v=e.nextMonthNav.contains(c);f||v?pt(f?-1:1):e.yearElements.indexOf(c)>=0?c.select():c.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):c.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Ei(a){a.preventDefault();var c=a.type==="keydown",f=oe(a),v=f;e.amPM!==void 0&&f===e.amPM&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]);var w=parseFloat(v.getAttribute("min")),_=parseFloat(v.getAttribute("max")),F=parseFloat(v.getAttribute("step")),I=parseInt(v.value,10),P=a.delta||(c?a.which===38?1:-1:0),x=I+F*P;if(typeof v.value<"u"&&v.value.length===2){var L=v===e.hourElement,H=v===e.minuteElement;x<w?(x=_+x+ce(!L)+(ce(L)&&ce(!e.amPM)),H&&N(void 0,-1,e.hourElement)):x>_&&(x=v===e.hourElement?x-_-ce(!e.amPM):w,H&&N(void 0,1,e.hourElement)),e.amPM&&L&&(F===1?x+I===23:Math.abs(x-I)>F)&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]),v.value=ne(x)}}return r(),e}function Me(n,t){for(var e=Array.prototype.slice.call(n).filter(function(s){return s instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var o=e[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Gs(o,t||{}),i.push(o._flatpickr)}catch(s){console.error(s)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Me(this,n)},HTMLElement.prototype.flatpickr=function(n){return Me([this],n)});var z=function(n,t){return typeof n=="string"?Me(window.document.querySelectorAll(n),t):n instanceof Node?Me([n],t):Me(n,t)};z.defaultConfig={};z.l10ns={en:Q({},Ne),default:Q({},Ne)};z.localize=function(n){z.l10ns.default=Q(Q({},z.l10ns.default),n)};z.setDefaults=function(n){z.defaultConfig=Q(Q({},z.defaultConfig),n)};z.parseDate=Vt({});z.formatDate=Xn({});z.compareDates=le;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Me(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=z);function Lt(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class Js{constructor(){this._events={}}on(t,e){Lt(t,i=>{const r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}Lt(t,r=>{if(i===1){delete this._events[r];return}const o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;Lt(t,r=>{const o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}}function Xs(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const ft=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":eo(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Zn=n=>{if(!Zs(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},ei=n=>{let t=Array.from(n);return ft(t)},Zs=n=>new Set(n).size!==n.length,He=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),eo=n=>n.reduce((t,e)=>Math.max(t,to(e)),0),to=n=>Array.from(n).length,ti=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return ti(e).forEach(function(r){let o=r.slice(0);o[0]=n.charAt(0)+o[0],t.push(o),o=r.slice(0),o.unshift(n.charAt(0)),t.push(o)}),t},no=[[0,65535]],io="[̀-ͯ·ʾʼ]";let at,ni;const ro=3,Kt={},An={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in An){let t=An[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Kt[i]=n}}const so=new RegExp(Object.keys(Kt).join("|")+"|"+io,"gu"),oo=n=>{at===void 0&&(at=uo(no))},Sn=(n,t="NFKD")=>n.normalize(t),lt=n=>Array.from(n).reduce((t,e)=>t+ao(e),""),ao=n=>(n=Sn(n).toLowerCase().replace(so,t=>Kt[t]||""),Sn(n,"NFC"));function*lo(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=lt(r);o!=r.toLowerCase()&&(o.length>ro||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}const co=n=>{const t={},e=(i,r)=>{const o=t[i]||new Set,s=new RegExp("^"+ei(o)+"$","iu");r.match(s)||(o.add(He(r)),t[i]=o)};for(let i of lo(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},uo=n=>{const t=co(n),e={};let i=[];for(let o in t){let s=t[o];s&&(e[o]=ei(s)),o.length>1&&i.push(He(o))}i.sort((o,s)=>s.length-o.length);const r=ft(i);return ni=new RegExp("^"+r,"u"),e},fo=(n,t=1)=>{let e=0;return n=n.map(i=>(at[i]&&(e+=i.length),at[i]||i)),e>=t?Zn(n):""},po=(n,t=1)=>(t=Math.max(t,n.length-1),ft(ti(n).map(e=>fo(e,t)))),xn=(n,t=!0)=>{let e=n.length>1?1:0;return ft(n.map(i=>{let r=[];const o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(po(i.substrs[s]||"",e));return Zn(r)}))},ho=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const r=s=>{for(const l of i){if(l.start===s.start&&l.substr===s.substr)return!1;if(!(s.length==1||l.length==1)&&(s.start<l.start&&s.end>l.start||l.start<s.start&&l.end>s.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class ct{constructor(){ye(this,"parts");ye(this,"substrs");ye(this,"start");ye(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new ct,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(const d of r)i.add(d);let s=e.substr.substring(0,t-o.start),l=s.length;return i.add({start:o.start,end:o.start+l,length:l,substr:s}),i}}const go=n=>{oo(),n=lt(n);let t="",e=[new ct];for(let i=0;i<n.length;i++){let o=n.substring(i).match(ni);const s=n.substring(i,i+1),l=o?o[0]:null;let d=[],u=new Set;for(const p of e){const h=p.last();if(!h||h.length==1||h.end<=i)if(l){const m=l.length;p.add({start:i,end:i+m,length:m,substr:l}),u.add("1")}else p.add({start:i,end:i+1,length:1,substr:s}),u.add("2");else if(l){let m=p.clone(i,h);const A=l.length;m.add({start:i,end:i+A,length:A,substr:l}),d.push(m)}else u.add("3")}if(d.length>0){d=d.sort((p,h)=>p.length()-h.length());for(let p of d)ho(p,e)||e.push(p);continue}if(i>0&&u.size==1&&!u.has("3")){t+=xn(e,!1);let p=new ct;const h=e[0];h&&p.add(h.last()),e=[p]}}return t+=xn(e,!0),t},mo=(n,t)=>{if(n)return n[t]},vo=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},Ft=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},Tt=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Je=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},bo=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=lt(n+"").toLowerCase(),t=lt(t+"").toLowerCase(),n>t?1:t>n?-1:0);class yo{constructor(t,e){ye(this,"items");ye(this,"settings");this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(He).join("|")+"):(.*)$")),o.forEach(l=>{let d,u=null,p=null;s&&(d=l.match(s))&&(u=d[1],l=d[2]),l.length>0&&(this.settings.diacritics?p=go(l)||null:p=He(l),p&&e&&(p="\\b"+p)),r.push({string:l,regex:p?new RegExp(p,"iu"):null,field:u})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const r=t.options.fields,o=t.weights,s=r.length,l=t.getAttrFn;if(!s)return function(){return 1};const d=function(){return s===1?function(u,p){const h=r[0].field;return Ft(l(p,h),u,o[h]||1)}:function(u,p){var h=0;if(u.field){const m=l(p,u.field);!u.regex&&m?h+=1/s:h+=Ft(m,u,1)}else Je(o,(m,A)=>{h+=Ft(l(p,A),u,m)});return h/s}}();return i===1?function(u){return d(e[0],u)}:t.options.conjunction==="and"?function(u){var p,h=0;for(let m of e){if(p=d(m,u),p<=0)return 0;h+=p}return h/i}:function(u){var p=0;return Je(e,h=>{p+=d(h,u)}),p/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);const l=function(u,p){return u==="$score"?p.score:t.getAttrFn(r.items[p.id],u)};if(s)for(let u of s)(t.query||u.field!=="$score")&&i.push(u);if(t.query){e=!0;for(let u of i)if(u.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(u=>u.field!=="$score");return i.length?function(u,p){var h,m;for(let A of i)if(m=A.field,h=(A.direction==="desc"?-1:1)*bo(l(m,u),l(m,p)),h)return h;return 0}:null}prepareSearch(t,e){const i={};var r=Object.assign({},e);if(Tt(r,"sort"),Tt(r,"sort_empty"),r.fields){Tt(r,"fields");const o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?vo:mo}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;const s=e.score||i._getScoreFunction(o);t.length?Je(i.items,(d,u)=>{r=s(d),(e.filter===!1||r>0)&&o.items.push({score:r,id:u})}):Je(i.items,(d,u)=>{o.items.push({score:1,id:u})});const l=i._getSortFunction(o);return l&&o.items.sort(l),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}}const ue=n=>typeof n>"u"||n===null?null:nt(n),nt=n=>typeof n=="boolean"?n?"1":"0":n+"",Pt=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),wo=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),Co=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},En=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},Oo=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),Y=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},X=(n,t,e,i)=>{n.addEventListener(t,e,i)},Oe=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},$t=(n,t)=>{const e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},In=n=>n.replace(/[\\"']/g,"\\$&"),_e=(n,t)=>{t&&n.append(t)},W=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},he=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ii(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ii=n=>typeof n=="string"&&n.indexOf("<")>-1,_o=n=>n.replace(/['"\\]/g,"\\$&"),Nt=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Xe=(n,t)=>{Object.assign(n.style,t)},ae=(n,...t)=>{var e=ri(t);n=si(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ve=(n,...t)=>{var e=ri(t);n=si(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},ri=n=>{var t=[];return W(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},si=n=>(Array.isArray(n)||(n=[n]),n),Ht=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},kn=(n,t=0)=>t>0?n[n.length-1]:n[0],Do=n=>Object.keys(n).length===0,Mn=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},R=(n,t)=>{W(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Yt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},Ao=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var l=document.createElement("span");l.className="highlight";var d=o.splitText(s.index);d.splitText(s[0].length);var u=d.cloneNode(!0);return l.appendChild(u),Yt(d,l),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},So=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},xo=65,Eo=13,Io=27,ko=37,Mo=38,Lo=39,Fo=40,Ln=8,To=46,Fn=9,Po=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Ze=Po?"metaKey":"ctrlKey",Tn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function Pn(n,t){var e=Object.assign({},Tn,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,l=e.optgroupField,d=e.optgroupLabelField,u=e.optgroupValueField,p=n.tagName.toLowerCase(),h=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!h&&!e.allowEmptyOption){let y=n.querySelector('option[value=""]');y&&(h=y.textContent)}var m={placeholder:h,options:[],optgroups:[],items:[],maxItems:null},A=()=>{var y,k=m.options,S={},b=1;let M=0;var N=O=>{var D=Object.assign({},O.dataset),C=i&&D[i];return typeof C=="string"&&C.length&&(D=Object.assign(D,JSON.parse(C))),D},ie=(O,D)=>{var C=ue(O.value);if(C!=null&&!(!C&&!e.allowEmptyOption)){if(S.hasOwnProperty(C)){if(D){var T=S[C][l];T?Array.isArray(T)?T.push(D):S[C][l]=[T,D]:S[C][l]=D}}else{var E=N(O);E[r]=E[r]||O.textContent,E[o]=E[o]||C,E[s]=E[s]||O.disabled,E[l]=E[l]||D,E.$option=O,E.$order=E.$order||++M,S[C]=E,k.push(E)}O.selected&&m.items.push(C)}},B=O=>{var D,C;C=N(O),C[d]=C[d]||O.getAttribute("label")||"",C[u]=C[u]||b++,C[s]=C[s]||O.disabled,C.$order=C.$order||++M,m.optgroups.push(C),D=C[u],W(O.children,T=>{ie(T,D)})};m.maxItems=n.hasAttribute("multiple")?null:1,W(n.children,O=>{y=O.tagName.toLowerCase(),y==="optgroup"?B(O):y==="option"&&ie(O)})},g=()=>{const y=n.getAttribute(i);if(y)m.options=JSON.parse(y),W(m.options,S=>{m.items.push(S[o])});else{var k=n.value.trim()||"";if(!e.allowEmptyOption&&!k.length)return;const S=k.split(e.delimiter);W(S,b=>{const M={};M[r]=b,M[o]=b,m.options.push(M)}),m.items=S}};return p==="select"?A():g(),Object.assign({},Tn,m,t)}var $n=0;class ee extends Xs(Js){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,$n++;var i,r=he(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");const s=Pn(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=$t(r,"tomselect-"+$n),this.isRequired=r.required,this.sifter=new yo(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var l=s.createFilter;typeof l!="function"&&(typeof l=="string"&&(l=new RegExp(l)),l instanceof RegExp?s.createFilter=k=>l.test(k):s.createFilter=k=>this.settings.duplicates||!this.options[k]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();const d=he("<div>"),u=he("<div>"),p=this._render("dropdown"),h=he('<div role="listbox" tabindex="-1">'),m=this.input.getAttribute("class")||"",A=s.mode;var g;if(ae(d,s.wrapperClass,m,A),ae(u,s.controlClass),_e(d,u),ae(p,s.dropdownClass,A),s.copyClassesToDropdown&&ae(p,m),ae(h,s.dropdownContentClass),_e(p,h),he(s.dropdownParent||d).appendChild(p),ii(s.controlInput)){g=he(s.controlInput);var y=["autocorrect","autocapitalize","autocomplete","spellcheck"];W(y,k=>{r.getAttribute(k)&&R(g,{[k]:r.getAttribute(k)})}),g.tabIndex=-1,u.appendChild(g),this.focus_node=g}else s.controlInput?(g=he(s.controlInput),this.focus_node=g):(g=he("<input/>"),this.focus_node=u);this.wrapper=d,this.dropdown=p,this.dropdown_content=h,this.control=u,this.control_input=g,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,l=t.control,d=t.input,u=t.focus_node,p={passive:!0},h=t.inputId+"-ts-dropdown";R(o,{id:h}),R(u,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":h});const m=$t(u,t.inputId+"-ts-control"),A="label[for='"+_o(t.inputId)+"']",g=document.querySelector(A),y=t.focus.bind(t);if(g){X(g,"click",y),R(g,{for:m});const b=$t(g,t.inputId+"-ts-label");R(u,{"aria-labelledby":b}),R(o,{"aria-labelledby":b})}if(s.style.width=d.style.width,t.plugins.names.length){const b="plugin-"+t.plugins.names.join(" plugin-");ae([s,r],b)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&R(d,{multiple:"multiple"}),e.placeholder&&R(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+He(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=Co(e.load,e.loadThrottle)),X(r,"mousemove",()=>{t.ignoreHover=!1}),X(r,"mouseenter",b=>{var M=Ht(b.target,"[data-selectable]",r);M&&t.onOptionHover(b,M)},{capture:!0}),X(r,"click",b=>{const M=Ht(b.target,"[data-selectable]");M&&(t.onOptionSelect(b,M),Y(b,!0))}),X(l,"click",b=>{var M=Ht(b.target,"[data-ts-item]",l);if(M&&t.onItemSelect(b,M)){Y(b,!0);return}i.value==""&&(t.onClick(),Y(b,!0))}),X(u,"keydown",b=>t.onKeyDown(b)),X(i,"keypress",b=>t.onKeyPress(b)),X(i,"input",b=>t.onInput(b)),X(u,"blur",b=>t.onBlur(b)),X(u,"focus",b=>t.onFocus(b)),X(i,"paste",b=>t.onPaste(b));const k=b=>{const M=b.composedPath()[0];if(!s.contains(M)&&!r.contains(M)){t.isFocused&&t.blur(),t.inputState();return}M==i&&t.isOpen?b.stopPropagation():Y(b,!0)},S=()=>{t.isOpen&&t.positionDropdown()};X(document,"mousedown",k),X(window,"scroll",S,p),X(window,"resize",S,p),this._destroy=()=>{document.removeEventListener("mousedown",k),window.removeEventListener("scroll",S),window.removeEventListener("resize",S),g&&g.removeEventListener("click",y)},this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,d.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,X(d,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,d.disabled?t.disable():d.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),ae(d,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),W(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?Pn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){Nt(this.input,"input"),Nt(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){Y(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);W(r,o=>{ue(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){Y(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),Y(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==Fn&&Y(t);return}switch(t.keyCode){case xo:if(Oe(Ze,t)&&e.control_input.value==""){Y(t),e.selectAll();return}break;case Io:e.isOpen&&(Y(t,!0),e.close()),e.clearActiveItems();return;case Fo:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}Y(t);return;case Mo:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}Y(t);return;case Eo:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),Y(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&Y(t);return;case ko:e.advanceSelection(-1,t);return;case Lo:e.advanceSelection(1,t);return;case Fn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),Y(t)),e.settings.create&&e.createItem()&&Y(t));return;case Ln:case To:e.deleteSelection(t);return}e.isInputHidden&&!Oe(Ze,t)&&Y(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=wo(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),Y(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(Y(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;ae(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||ve(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,Nt(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];En(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,l,d,u;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&Oe("shiftKey",e)&&i.activeItems.length){for(u=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,u),l=Array.prototype.indexOf.call(i.control.children,t),s>l&&(d=s,s=l,l=d),o=s;o<=l;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);Y(e)}else r==="click"&&Oe(Ze,e)||r==="keydown"&&Oe("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&ve(i,"last-active"),ae(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ve(t,"active")}clearActiveItems(){ve(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,R(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),R(t,{"aria-selected":"true"}),ae(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,l=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;l+s>r+o?this.scroll(l-r+s,e):l<o&&this.scroll(l,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(ve(this.activeOption,"active"),R(this.activeOption,{"aria-selected":null})),this.activeOption=null,R(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,W(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(R(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&R(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let l=ue(s.id);return!(l&&r.items.indexOf(l)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,l,d,u,p,h;const m={},A=[];var g=this,y=g.inputValue();const k=y===g.lastQuery||y==""&&g.lastQuery==null;var S=g.search(y),b=null,M=g.settings.shouldOpen||!1,N=g.dropdown_content;k&&(b=g.activeOption,b&&(p=b.closest("[data-group]"))),o=S.items.length,typeof g.settings.maxOptions=="number"&&(o=Math.min(o,g.settings.maxOptions)),o>0&&(M=!0);const ie=(O,D)=>{let C=m[O];if(C!==void 0){let E=A[C];if(E!==void 0)return[C,E.fragment]}let T=document.createDocumentFragment();return C=A.length,A.push({fragment:T,order:D,optgroup:O}),[C,T]};for(e=0;e<o;e++){let O=S.items[e];if(!O)continue;let D=O.id,C=g.options[D];if(C===void 0)continue;let T=nt(D),E=g.getOption(T,!0);for(g.settings.hideSelected||E.classList.toggle("selected",g.items.includes(T)),s=C[g.settings.optgroupField]||"",l=Array.isArray(s)?s:[s],i=0,r=l&&l.length;i<r;i++){s=l[i];let te=C.$order,U=g.optgroups[s];U===void 0?s="":te=U.$order;const[Le,Ae]=ie(s,te);i>0&&(E=E.cloneNode(!0),R(E,{id:C.$id+"-clone-"+i,"aria-selected":null}),E.classList.add("ts-cloned"),ve(E,"active"),g.activeOption&&g.activeOption.dataset.value==D&&p&&p.dataset.group===s.toString()&&(b=E)),Ae.appendChild(E),s!=""&&(m[s]=Le)}}g.settings.lockOptgroupOrder&&A.sort((O,D)=>O.order-D.order),d=document.createDocumentFragment(),W(A,O=>{let D=O.fragment,C=O.optgroup;if(!D||!D.children.length)return;let T=g.optgroups[C];if(T!==void 0){let E=document.createDocumentFragment(),te=g.render("optgroup_header",T);_e(E,te),_e(E,D);let U=g.render("optgroup",{group:T,options:E});_e(d,U)}else _e(d,D)}),N.innerHTML="",_e(N,d),g.settings.highlight&&(So(N),S.query.length&&S.tokens.length&&W(S.tokens,O=>{Ao(N,O.regex)}));var B=O=>{let D=g.render(O,{input:y});return D&&(M=!0,N.insertBefore(D,N.firstChild)),D};if(g.loading?B("loading"):g.settings.shouldLoad.call(g,y)?S.items.length===0&&B("no_results"):B("not_loading"),u=g.canCreate(y),u&&(h=B("option_create")),g.hasOptions=S.items.length>0||u,M){if(S.items.length>0){if(!b&&g.settings.mode==="single"&&g.items[0]!=null&&(b=g.getOption(g.items[0])),!N.contains(b)){let O=0;h&&!g.settings.addPrecedence&&(O=1),b=g.selectable()[O]}}else h&&(b=h);t&&!g.isOpen&&(g.open(),g.scrollToOption(b,"auto")),g.setActiveOption(b)}else g.clearActiveOption(),t&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const r=ue(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){W(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=ue(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var r,o;const s=ue(t),l=ue(e[i.settings.valueField]);if(s===null)return;const d=i.options[s];if(d==null)return;if(typeof l!="string")throw new Error("Value must be set in option data");const u=i.getOption(s),p=i.getItem(s);if(e.$order=e.$order||d.$order,delete i.options[s],i.uncacheValue(l),i.options[l]=e,u){if(i.dropdown_content.contains(u)){const h=i._render("option",e);Yt(u,h),i.activeOption===u&&i.setActiveOption(h)}u.remove()}p&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,l),r=i._render("item",e),p.classList.contains("active")&&ae(r,"active"),Yt(p,r)),i.lastQuery=null}removeOption(t,e){const i=this;t=nt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};W(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=ue(t);if(i===null)return null;const r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=ue(t);return e!==null?this.control.querySelector(`[data-value="${In(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);const o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];En(this,i,()=>{var r,o;const s=this,l=s.settings.mode,d=ue(t);if(!(d&&s.items.indexOf(d)!==-1&&(l==="single"&&s.close(),l==="single"||!s.settings.duplicates))&&!(d===null||!s.options.hasOwnProperty(d))&&(l==="single"&&s.clear(e),!(l==="multi"&&s.isFull()))){if(r=s._render("item",s.options[d]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,d),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let u=s.getOption(d),p=s.getAdjacent(u,1);p&&s.setActiveOption(p)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&l!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",d,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var r,o;const s=t.dataset.value;r=Mn(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),ve(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,l=d=>{if(i.unlock(),!d||typeof d!="object")return e();var u=ue(d[i.settings.valueField]);if(typeof u!="string")return e();i.setTextboxValue(),i.addOption(d,!0),i.setCaret(r),i.addItem(u),e(d),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,l):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||l(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Do(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,r;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let d=function(u,p,h){return u||(u=he('<option value="'+Pt(p)+'">'+Pt(h)+"</option>")),u!=o&&e.input.append(u),s.push(u),(u!=o||l>0)&&(u.selected=!0),u};const s=[],l=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(u=>{u.selected=!1}),e.items.length==0&&e.settings.mode=="single"?d(o,"",""):e.items.forEach(u=>{if(i=e.options[u],r=i[e.settings.labelField]||"",s.includes(i.$option)){const p=e.input.querySelector(`option[value="${In(u)}"]:not(:checked)`);d(p,u,r)}else i.$option=d(i.$option,u,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,R(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Xe(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Xe(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,R(e.focus_node,{"aria-expanded":"false"}),Xe(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Xe(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();W(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===Ln?-1:1,i=Oo(s.control_input);const l=[];if(s.activeItems.length)o=kn(s.activeItems,e),r=Mn(o),e>0&&r++,W(s.activeItems,d=>l.push(d));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){const d=s.controlChildren();let u;e<0&&i.start===0&&i.length===0?u=d[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(u=d[s.caretPos]),u!==void 0&&l.push(u)}if(!s.shouldDelete(l,t))return!1;for(Y(t,!0),typeof r<"u"&&s.setCaret(r);l.length;)s.removeItem(l.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(Oe(Ze,e)||Oe("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return kn(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ve(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;const o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,Pt),!r))return null;if(r=he(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?R(r,{"aria-disabled":"true"}):R(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],R(r,{"data-group":i}),e.group[o.settings.disabledField]&&R(r,{"data-disabled":""})),t==="option"||t==="item"){const s=nt(e[o.settings.valueField]);R(r,{"data-value":s}),t==="item"?(ae(r,o.settings.itemClass),R(r,{"data-ts-item":""})):(ae(r,o.settings.optionClass),R(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){W(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,l;return t==="after"&&(s=o.apply(r,arguments)),l=i.apply(r,arguments),t==="instead"?l:(t==="before"&&(s=o.apply(r,arguments)),s)}}}const $o=(n,t,e,i)=>{n.addEventListener(t,e,i)};function No(){$o(this.input,"change",()=>{this.sync()})}const Ho=n=>typeof n>"u"||n===null?null:jo(n),jo=n=>typeof n=="boolean"?n?"1":"0":n+"",Nn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ro=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Vo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Vo=n=>typeof n=="string"&&n.indexOf("<")>-1;function Yo(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(l,d){d?(l.checked=!0,i.uncheckedClassNames&&l.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&l.classList.add(...i.checkedClassNames)):(l.checked=!1,i.checkedClassNames&&l.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&l.classList.add(...i.uncheckedClassNames))},o=function(l){setTimeout(()=>{var d=l.querySelector("input."+i.className);d instanceof HTMLInputElement&&r(d,l.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(l,d)=>{var u=Ro(s.call(t,l,d)),p=document.createElement("input");i.className&&p.classList.add(i.className),p.addEventListener("click",function(m){Nn(m)}),p.type="checkbox";const h=Ho(l[t.settings.valueField]);return r(p,!!(h&&t.items.indexOf(h)>-1)),u.prepend(p),u}}),t.on("item_remove",s=>{var l=t.getOption(s);l&&(l.classList.remove("selected"),o(l))}),t.on("item_add",s=>{var l=t.getOption(s);l&&o(l)}),t.hook("instead","onOptionSelect",(s,l)=>{if(l.classList.contains("selected")){l.classList.remove("selected"),t.removeItem(l.dataset.value),t.refreshOptions(),Nn(s,!0);return}e.call(t,s,l),o(l)})}const Bo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(qo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},qo=n=>typeof n=="string"&&n.indexOf("<")>-1;function zo(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=Bo(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}const Ko=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ee=(n,t,e,i)=>{n.addEventListener(t,e,i)},Wo=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Uo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Qo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Qo=n=>typeof n=="string"&&n.indexOf("<")>-1,Go=(n,t)=>{Wo(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Jo=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Xo=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Zo=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function ea(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,l)=>{const d=Uo(o.call(n,s,l));Go(d,{draggable:"true"});const u=y=>{i||Ko(y),y.stopPropagation()},p=y=>{r=d,setTimeout(()=>{d.classList.add("ts-dragging")},0)},h=y=>{y.preventDefault(),d.classList.add("ts-drag-over"),A(d,r)},m=()=>{d.classList.remove("ts-drag-over")},A=(y,k)=>{k!==void 0&&(Zo(k,d)?Jo(y,k):Xo(y,k))},g=()=>{var y;document.querySelectorAll(".ts-drag-over").forEach(S=>S.classList.remove("ts-drag-over")),(y=r)==null||y.classList.remove("ts-dragging"),r=void 0;var k=[];n.control.querySelectorAll("[data-value]").forEach(S=>{if(S.dataset.value){let b=S.dataset.value;b&&k.push(b)}}),n.setValue(k)};return Ee(d,"mousedown",u),Ee(d,"dragstart",p),Ee(d,"dragenter",h),Ee(d,"dragover",h),Ee(d,"dragleave",m),Ee(d,"dragend",g),d}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const ta=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},na=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ia(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ia=n=>typeof n=="string"&&n.indexOf("<")>-1;function ra(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=na(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{ta(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const sa=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},oa=(n,...t)=>{var e=aa(t);n=la(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},aa=n=>{var t=[];return sa(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},la=n=>(Array.isArray(n)||(n=[n]),n),ca=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function da(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=ca(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),oa(e,"last-active")}else n.setCaret(n.caretPos+t)})}const ua=27,fa=9,pa=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ha=(n,t,e,i)=>{n.addEventListener(t,e,i)},ga=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Hn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(ma(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},ma=n=>typeof n=="string"&&n.indexOf("<")>-1,va=(n,...t)=>{var e=ba(t);n=ya(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ba=n=>{var t=[];return ga(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ya=n=>(Array.isArray(n)||(n=[n]),n);function wa(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,va(n.control_input,"dropdown-input");const t=Hn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=Hn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case ua:n.isOpen&&(pa(e,!0),n.close()),n.clearActiveItems();return;case fa:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),ha(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const et=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Ca(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),et(e,"input",r),et(e,"keyup",r),et(e,"blur",r),et(e,"update",r)})}function Oa(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function _a(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const jn=37,Da=39,Aa=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Sa=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function xa(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===jn||e.keyCode===Da))return t.call(n,e);n.ignoreHover=!0,s=Aa(n.activeOption,"[data-group]"),i=Sa(n.activeOption,"[data-selectable]"),s&&(e.keyCode===jn?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}const Ea=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Rn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Vn=(n,t,e,i)=>{n.addEventListener(t,e,i)},Yn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ia(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ia=n=>typeof n=="string"&&n.indexOf("<")>-1;function ka(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Ea(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var l=Yn(r.call(e,o,s)),d=Yn(i);return l.appendChild(d),Vn(d,"mousedown",u=>{Rn(u,!0)}),Vn(d,"click",u=>{e.isLocked||(Rn(u,!0),!e.isLocked&&e.shouldDelete([l],u)&&(e.removeItem(l),e.refreshOptions(!1),e.inputState()))}),l}})}}function Ma(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}const La=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Fa=(n,...t)=>{var e=Ta(t);n=Pa(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Ta=n=>{var t=[];return La(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Pa=n=>(Array.isArray(n)||(n=[n]),n);function $a(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,l,d=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var m=n.selectable(),A=Array.from(m).indexOf(n.activeOption);if(A>=m.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const u=h=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(h in r&&r[h]),p=(h,m)=>n.items.indexOf(m)>=0||d.indexOf(m)>=0;n.setNextUrl=(h,m)=>{r[h]=m},n.getUrl=h=>{if(h in r){const m=r[h];return r[h]=!1,m}return n.clearPagination(),n.settings.firstUrl.call(n,h)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",h=>h in r?u(h):t.call(n,h)),n.hook("instead","loadCallback",(h,m)=>{if(!s)n.clearOptions(p);else if(l){const A=h[0];A!==void 0&&(l.dataset.value=A[n.settings.valueField])}i.call(n,h,m),s=!1}),n.hook("after","refreshOptions",()=>{const h=n.lastValue;var m;u(h)?(m=n.render("loading_more",{query:h}),m&&(m.setAttribute("data-selectable",""),l=m)):h in r&&!o.querySelector(".no-results")&&(m=n.render("no_more_results",{query:h})),m&&(Fa(m,n.settings.optionClass),o.append(m))}),n.on("initialize",()=>{d=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&u(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}ee.define("change_listener",No);ee.define("checkbox_options",Yo);ee.define("clear_button",zo);ee.define("drag_drop",ea);ee.define("dropdown_header",ra);ee.define("caret_position",da);ee.define("dropdown_input",wa);ee.define("input_autogrow",Ca);ee.define("no_backspace_delete",Oa);ee.define("no_active_items",_a);ee.define("optgroup_columns",xa);ee.define("remove_button",ka);ee.define("restore_on_backspace",Ma);ee.define("virtual_scroll",$a);window.TomSelect=ee;const oi=document.getElementById("menu-toggle"),Bt=document.getElementById("mobile-menu");oi.addEventListener("click",()=>{Bt.classList.toggle("hidden")});const qt=document.getElementById("user-menu-button"),dt=document.getElementById("profile-dropdown");qt.addEventListener("click",()=>{dt.classList.toggle("hidden");const n=dt.classList.contains("hidden")?"false":"true";qt.setAttribute("aria-expanded",n)});oi.addEventListener("focusout",ai);qt.addEventListener("focusout",ai);function ai(){console.log("trigered");const n=dt.classList.contains("hidden")?"false":"true",t=Bt.classList.contains("hidden")?"false":"true";n&&Bt.classList.add("hidden"),t&&dt.classList.add("hidden")}document.addEventListener("livewire:navigated",()=>{const n=document.getElementById("menu-toggle"),t=document.getElementById("mobile-menu");n.addEventListener("click",()=>{t.classList.toggle("hidden")});const e=document.getElementById("user-menu-button"),i=document.getElementById("profile-dropdown");e.addEventListener("click",()=>{i.classList.toggle("hidden");const o=i.classList.contains("hidden")?"false":"true";e.setAttribute("aria-expanded",o)}),n.addEventListener("focusout",r),e.addEventListener("focusout",r);function r(){console.log("trigered");const o=i.classList.contains("hidden")?"false":"true",s=t.classList.contains("hidden")?"false":"true";o&&t.classList.add("hidden"),s&&i.classList.add("hidden")}});
